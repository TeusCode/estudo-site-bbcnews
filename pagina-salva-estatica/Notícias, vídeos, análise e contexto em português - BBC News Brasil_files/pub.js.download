/* GptMeasurement HouseHold ImplementationValidator LegacyLayer PLEMetrics SignalsAbs SignalsAutoInsertion SignalsBsc SignalsIds SignalsTvp SignalsVlp Visibility */
(()=>{var gn=Object.create;var dt=Object.defineProperty,pn=Object.defineProperties,tr=Object.getOwnPropertyDescriptor,hn=Object.getOwnPropertyDescriptors,fn=Object.getOwnPropertyNames,er=Object.getOwnPropertySymbols,vn=Object.getPrototypeOf,rr=Object.prototype.hasOwnProperty,Sn=Object.prototype.propertyIsEnumerable;var It=(n,e,t)=>e in n?dt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L=(n,e)=>{for(var t in e||(e={}))rr.call(e,t)&&It(n,t,e[t]);if(er)for(var t of er(e))Sn.call(e,t)&&It(n,t,e[t]);return n},Ve=(n,e)=>pn(n,hn(e)),i=(n,e)=>dt(n,"name",{value:e,configurable:!0});var nr=(n,e)=>()=>(n&&(e=n(n=0)),e);var En=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Tn=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of fn(e))!rr.call(n,o)&&o!==t&&dt(n,o,{get:()=>e[o],enumerable:!(r=tr(e,o))||r.enumerable});return n};var ir=(n,e,t)=>(t=n!=null?gn(vn(n)):{},Tn(e||!n||!n.__esModule?dt(t,"default",{value:n,enumerable:!0}):t,n));var d=(n,e,t,r)=>{for(var o=r>1?void 0:r?tr(e,t):e,l=n.length-1,c;l>=0;l--)(c=n[l])&&(o=(r?c(e,t,o):c(o))||o);return r&&o&&dt(e,t,o),o};var u=(n,e,t)=>It(n,typeof e!="symbol"?e+"":e,t);var E=(n,e,t)=>new Promise((r,o)=>{var l=v=>{try{h(t.next(v))}catch(y){o(y)}},c=v=>{try{h(t.throw(v))}catch(y){o(y)}},h=v=>v.done?r(v.value):Promise.resolve(v.value).then(l,c);h((t=t.apply(n,e)).next())});var m,s=nr(()=>{m={"4817":{adServerId:1360,customTracking:{c1:{type:"targeting",key:"permutive"},c3:{type:"targeting",key:"rec_ord"},c4:{type:"targeting",key:"page_type"},c5:{type:"targeting",key:"hb_pb"},c6:{type:"targeting",key:"group"}},adPositionKey:"slot"}}});var a=nr(()=>{});var Gt=En((Bf,nn)=>{s();a();function Ki(n,e){if(typeof n!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof n}\`.`);let t,r=0;return i(function(...l){clearTimeout(t);let c=Date.now(),h=c-r,v=e-h;v<=0?(r=c,n.apply(this,l)):t=setTimeout(()=>{r=Date.now(),n.apply(this,l)},v)},"throttled")}i(Ki,"throttle");nn.exports=Ki});s();a();s();a();s();a();s();a();s();a();s();a();s();a();var k=[];for(let n=0;n<256;++n)k.push((n+256).toString(16).slice(1));function or(n,e=0){return(k[n[e+0]]+k[n[e+1]]+k[n[e+2]]+k[n[e+3]]+"-"+k[n[e+4]]+k[n[e+5]]+"-"+k[n[e+6]]+k[n[e+7]]+"-"+k[n[e+8]]+k[n[e+9]]+"-"+k[n[e+10]]+k[n[e+11]]+k[n[e+12]]+k[n[e+13]]+k[n[e+14]]+k[n[e+15]]).toLowerCase()}i(or,"unsafeStringify");s();a();var Pt,An=new Uint8Array(16);function xt(){if(!Pt){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Pt=crypto.getRandomValues.bind(crypto)}return Pt(An)}i(xt,"rng");s();a();s();a();var _n=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ot={randomUUID:_n};function Rn(n,e,t){var o,l,c;if(Ot.randomUUID&&!e&&!n)return Ot.randomUUID();n=n||{};let r=(c=(l=n.random)!=null?l:(o=n.rng)==null?void 0:o.call(n))!=null?c:xt();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let h=0;h<16;++h)e[t+h]=r[h];return e}return or(r)}i(Rn,"v4");var Lt=Rn;var ve=i(()=>Lt(),"uuid");s();a();var Nt={queueAdRequest:i(n=>{var e;try{(e=n.callback)==null||e.call(n),n.callback=null}catch(t){}},"queueAdRequest"),defineSlot:i((n,e)=>{},"defineSlot"),adRendered:i((n,e)=>{},"adRendered"),adRemoved:i(n=>{},"adRemoved"),getTargeting:i(n=>({}),"getTargeting"),addEventListener:i((n,e)=>{},"addEventListener"),removeEventListener:i((n,e)=>{},"removeEventListener"),toggleDebugMode:i(()=>{console.log("%c[UT-DEBUG]%c Debug mode is not available for this tag.","color: red","color: intial")},"toggleDebugMode"),_debugScriptLoaded:i(()=>{},"_debugScriptLoaded")};s();a();var Xe,Je,Ze,oe=class oe{constructor(e,t){u(this,"collections",new Set);u(this,"children",new oe.Set);u(this,"beforeDestroyed");this.beforeDestroyed=t!=null?t:()=>{};for(let[r,o]of Object.entries(e))Object.defineProperty(this,r,{value:o});e.parent!=null&&(e.parent.destroyed?this.destroy():e.parent.children.add(this))}static Create(e,t){return new oe(e,t)}static CreateRoot(e,t){return new oe(e,t)}destroy(){if(this.beforeDestroyed!=null){try{this.beforeDestroyed(this)}catch(e){}for(let e of this.children)e.destroy();this.beforeDestroyed=void 0;for(let e of this.collections)e.delete(this)}return this}get destroyed(){return this.beforeDestroyed==null}};i(oe,"EntityClass"),u(oe,"Set",(Xe=class extends Set{add(t){return t.destroyed||(t.collections.add(this),super.add(t)),this}delete(t){return t.collections.delete(this),super.delete(t)}clear(){for(let t of this.values())t.collections.delete(this);super.clear()}peek(){return this.values().next().value}conjure(t){let r=this.peek();return r==null&&(r=t(),this.add(r)),r}},i(Xe,"EntitySet"),Xe)),u(oe,"Map",(Je=class extends Map{set(t,r){return t.destroyed||(t.collections.add(this),super.set(t,r)),this}delete(t){return t.collections.delete(this),super.delete(t)}clear(){for(let t of this.keys())t.collections.delete(this);return super.clear()}summon(t,r){let o=super.get(t);return o==null&&(o=r,this.set(t,o)),o}conjure(t,r){let o=super.get(t);return o==null&&(o=r(),this.set(t,o)),o}},i(Je,"EntityMap"),Je)),u(oe,"Link",(Ze=class extends oe.Map{get(t){return super.conjure(t,()=>new oe.Set)}},i(Ze,"EntityLink"),Ze));var je=oe,S;(l=>(l.Set=je.Set,l.Map=je.Map,l.Link=je.Link,l.Create=je.Create,l.CreateRoot=je.CreateRoot))(S||(S={}));s();a();var Mt=class Mt{constructor(){u(this,"isEntryModule",!0)}};i(Mt,"EntryModule");var P=Mt;s();a();var ft=class ft{constructor(e){u(this,"_error");u(this,"_message","unknown");u(this,"_trace",[]);if(e instanceof ft)return e;e instanceof Error&&(this._error=e,this._message=e.message)}get error(){return this._error}get message(){return this._message}get trace(){return this._trace}addToTrace(e){this.trace.unshift(e)}};i(ft,"TracedError");var He=ft;var Ut=class Ut{constructor(e,t){u(this,"window");u(this,"dvtag");u(this,"modules",new Map);u(this,"errorHandlers",[]);u(this,"errors",[]);u(this,"session",S.CreateRoot({id:ve()}));var r;this.window=t,this.window.dvtag=(r=this.window.dvtag)!=null?r:{},this.dvtag=this.window.dvtag,this.dvtag._core=this;for(let[o,l]of Object.entries(Nt))this.dvtag[o]=l;for(let o of e)this.createModule(o);for(let o of this.modules.values())this.applyModuleDecoration(o);for(let o of this.modules.values())this.applyErrorDecoration(o);for(let o of this.modules.values())this.applyPluginDecoration(o);for(let o of this.modules.values())this.applyApiDecoration(o);for(let o of this.modules.values())this.applyExecuteDecoration(o)}get moduleList(){return[...this.modules.keys()].map(e=>e.name)}get entryModuleList(){return[...this.modules.entries()].filter(([e,t])=>t instanceof P).map(([e,t])=>e.name)}get(e){return this.getModule(e).gateway}getByName(e){let t=[...this.modules.keys()].find(r=>r.name===e);return t!=null?this.get(t):null}getModule(e){let t=this.modules.get(e);if(t==null)throw new Error(`module not in core: ${e.name}`);return t}createModule(e){if(e.prototype.moduleConfig==null)throw new Error(`not a module: ${e.name}`);let t=new e;t.core=this,t.gateway={module:t},this.modules.set(e,t)}applyModuleDecoration(e){var o,l,c,h,v,y;let t=e.constructor.prototype.moduleConfig,r=e.constructor.name;for(let{method:C}of t){let he=e[C].bind(e),fe=(c=(l=(o=this.dvtag._hooks)==null?void 0:o.interceptModule)==null?void 0:l[r])==null?void 0:c[C],U=fe==null?he:fe.bind(e),Ie=(y=(v=(h=this.dvtag._hooks)==null?void 0:h.inspectModule)==null?void 0:v[r])==null?void 0:y[C],Dt=Ie==null?U:(...Ke)=>{let $e=U(...Ke);return Ie(Ke,$e),$e},mn=i((...Ke)=>{let $e;try{$e=Dt(...Ke)}catch(lt){throw this.traceMethodError(e,C,Ke,lt)}return $e instanceof Promise?$e.then(lt=>lt,lt=>{throw this.traceMethodError(e,C,Ke,lt)}):$e},"traced");e.gateway[C]=mn}if(e.plugins!=null){e.pluginFunctions={};for(let C of Object.keys(e.plugins)){e.pluginFunctions[C]=[];let he=e.pluginFunctions[C];e.plugins[C]=(...fe)=>{let U=[];for(let Ie of he)try{U.push(Ie(...fe))}catch(Dt){this.tracePluginError(e,C,Dt)}return U}}}}traceMethodError(e,t,r,o){let l=new He(o);return l.addToTrace(`${e.constructor.name}.${t}(${r.map(c=>typeof c).join(",")})`),l}traceExecuteError(e){let t=new He(e);return t.addToTrace("@execute"),this.handleSevereError(t),t}tracePluginError(e,t,r){let o=new He(r);return o.addToTrace(`@plugin(${e.constructor.name}, '${t}')`),this.handleSevereError(o),o}traceApiError(e,t){let r=new He(t);return r.addToTrace(`@api('${e}')`),this.handleSevereError(r),r}handleSevereError(e){for(let t of this.errorHandlers)try{t(e)}catch(r){}this.errors.length>10||this.errors.push({message:e.message,trace:e.trace})}applyErrorDecoration(e){var r;let t=(r=e.constructor.prototype.errorConfig)!=null?r:[];for(let{method:o}of t)this.errorHandlers.push(e.gateway[o])}applyPluginDecoration(e){var r;let t=(r=e.constructor.prototype.pluginConfig)!=null?r:[];for(let{PluggableClass:o,category:l,method:c}of t)this.getModule(o).pluginFunctions[l].push(e.gateway[c])}applyApiDecoration(e){var r;let t=(r=e.constructor.prototype.apiConfig)!=null?r:[];for(let{api:o,method:l}of t)Object.defineProperty(this.dvtag,o,{value:i((...c)=>{var h,v;try{return e.gateway[l](...c)}catch(y){return this.traceApiError(o,y),(v=(h=Nt)[o])==null?void 0:v.call(h,...c)}},"value"),writable:!1})}applyExecuteDecoration(e){return E(this,null,function*(){var r;let t=(r=e.constructor.prototype.executeConfig)!=null?r:[];for(let{method:o}of t)try{yield e.gateway[o]()}catch(l){this.traceExecuteError(l)}})}};i(Ut,"Core");var ut=Ut;s();a();s();a();var kt=[],Ft=kt;var g=i(n=>{let e=n.prototype,t=Object.getOwnPropertyNames(e).filter(r=>{var o;return r!=="constructor"&&((o=Object.getOwnPropertyDescriptor(e,r))==null?void 0:o.value)instanceof Function});e.moduleConfig=t.map(r=>({method:r})),kt.push(n)},"moduleClass"),O=i(n=>e=>{},"attachModule"),R=i((n,e)=>{var t;n.executeConfig=(t=n.executeConfig)!=null?t:[],n.executeConfig.push({method:e})},"executeMethod"),f=i((n,e)=>(t,r)=>{var o;t.pluginConfig=(o=t.pluginConfig)!=null?o:[],t.pluginConfig.push({PluggableClass:n,category:e,method:r})},"pluginMethod"),J=i(n=>(e,t)=>{var r;e.apiConfig=(r=e.apiConfig)!=null?r:[],e.apiConfig.push({api:n,method:t})},"apiMethod"),sr=i((n,e)=>{var t;n.errorConfig=(t=n.errorConfig)!=null?t:[],n.errorConfig.push({method:e})},"errorMethod");s();a();s();a();var et=i(n=>{if(n==null)return[];let e=ar(n);return e!=null?[e]:Array.isArray(n)?n.map(ar).filter(t=>t!=null):[]},"parseSlotSizes"),ar=i(n=>{if(n==null)return null;if(typeof n=="string")return{label:n};if(Array.isArray(n)){if(n.length===1&&typeof n[0]=="string")return{label:n[0]};if(n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number")return{width:n[0],height:n[1]}}if(typeof n=="object"){let{label:e,width:t,height:r}=n;if(typeof t=="number"&&typeof r=="number")return{width:t,height:r};if(typeof e=="string")return{label:e}}return null},"parseSlotSize");s();a();var lr=i(n=>{try{return n.getSizes()}catch(e){return[]}},"getGptSlotSizesSafe");s();a();var vt=i(n=>{let e=n.split("/").map(o=>o.trim()).filter(o=>o.length>0);if(e.length<2)return;let t=e[0].split(",",1)[0],r=Number(t);return Number.isNaN(r)?void 0:`${r}`},"getNetworkCodeFromAdUnit");var St=i((n,e)=>{let t=n.getAdUnitPath(),r=vt(t);return{id:t,network:r,sizes:et(lr(n)),position:n.getTargeting(e)[0]}},"gptSlotToAdUnit");s();a();s();a();s();a();s();a();var dr=i(n=>{let e=n.renderedSize;return Array.isArray(e)?`${e[0]}x${e[1]}`:e},"toCreativeSizeString");s();a();var ur=i(n=>{switch(n){case"gpt":return"104";case"ast":return"90";default:return"0"}},"toAdServerCode");s();a();s();a();var qt="dvp_spos";var F=class{_getAdServers(){try{return m}catch(e){return{}}}isAdServerConfigured(e){return e!=null&&e in this._getAdServers()}getAdServerConfig(e){var t;return e==null||!this.isAdServerConfigured(e)?{}:(t=this._getAdServers()[e])!=null?t:{}}getAdServerCustomTracking(e){var t;return e==null||!this.isAdServerConfigured(e)?{}:(t=this._getAdServers()[e].customTracking)!=null?t:{}}getAdServerId(e){if(!(e==null||!this.isAdServerConfigured(e)))return this._getAdServers()[e].adServerId}getAdPositionKey(e){var t,r;return e==null?qt:(r=(t=this._getAdServers()[e])==null?void 0:t.adPositionKey)!=null?r:qt}};i(F,"AdServers"),F=d([g],F);s();a();var A=class{constructor(){u(this,"plugins",{slotDiscovered:i((e,t)=>[],"slotDiscovered")});u(this,"slots",new S.Set)}getSlot(e,t){for(let r of this.slots)if(r.adServer===e&&r.elementId===t)return r}getSlots(e){let t=[...this.slots];return e==null?t:t.filter(r=>r.adServer===e)}createSlot(e,t,r,o,l){let c=this.getSlot(e,r);c!=null&&c.destroy();let h=S.Create({parent:this.core.session,adServer:e,elementId:r,adUnit:o,uuid:ve(),creationTime:Date.now()});return this.slots.add(h),l==null||l(h),this.plugins.slotDiscovered(h,t),h}};i(A,"SlotStore"),A=d([g],A);s();a();s();a();s();a();var _e=i((...n)=>{let e=[];for(let t of n)if(t!=null)for(let r of t)e.includes(r)||e.push(r);return e},"mergeUnique");var b=class{constructor(){u(this,"plugins",{getAdServerTargeting:i((e,t)=>[],"getAdServerTargeting"),setAdServerTargeting:i((e,t,r)=>[],"setAdServerTargeting")});u(this,"globalTargeting",{});u(this,"slotTargeting",new S.Map)}_getSlotTargeting(e){return this.slotTargeting.summon(e,{})}_getTargetingKeys(e){return _e(Object.keys(this.globalTargeting),Object.keys(this._getSlotTargeting(e)))}_getTargetingValues(e,t){return _e(this.globalTargeting[t],this._getSlotTargeting(e)[t])}getTargeting(e){let t={};if(e==null)for(let r of Object.keys(this.globalTargeting))t[r]=[...this.globalTargeting[r]];else for(let r of this._getTargetingKeys(e))t[r]=this._getTargetingValues(e,r);return t}setSlotTargeting(e,t,r=!1){var c;let o=Object.keys(t),l=this._getSlotTargeting(e);for(let h of o)l[h]=_e(t[h],r?(c=this.slotTargeting.get(e))==null?void 0:c[h]:null);this.setAdServerTargeting(e,o)}setGlobalTargeting(e,t=!1){let r=Object.keys(e);for(let o of r)this.globalTargeting[o]=_e(e[o],t?this.globalTargeting[o]:null);for(let o of this.core.get(A).getSlots())this.setAdServerTargeting(o,r)}getAdServerTargeting(e,t){var r;return(r=this.plugins.getAdServerTargeting(e,t).find(o=>o.length!==0))!=null?r:[]}setAdServerTargeting(e,t){t==null&&(t=this._getTargetingKeys(e));for(let r of t)this.plugins.setAdServerTargeting(e,r,this._getTargetingValues(e,r))}_onSlotDiscovered(e){this.setAdServerTargeting(e)}};i(b,"TargetingHub"),d([f(A,"slotDiscovered")],b.prototype,"_onSlotDiscovered",1),b=d([g],b);s();a();s();a();s();a();var bn=[[/((\?)|&)(?:amp_lite|fr=operanews)/g,"$2"],[/(^https?:\/\/)(www\.)/g,"$1"],[/(((\?)|&|%3F|%26|;)(?:utm_campaign|utm_source|utm_content|utm_term|utm_viral|utm_medium|utm_identifier|utm_key|fb_source|referrer|referer|ref|rand|rnd|randid|\.?rand|\.?partner|cb|count|adid|session|sessionid|session_redirect|param\d|userinfo|uid|refresh|ocid|ncid|clickenc|fbclid|amp_js_v|amp_gsa|ns_source|ns_campaign|ns_mchanel|ns_mchannel|ns_linkname|ns_fee|src|ex_cid|usqp|source|xid|trkid|utm_social-type|mbid|utm_brand|__twitter_impression|utm_referrer|CMP|cmp|_cmp|cq_cmp)=[^&]*)/g,"$3"],[/[/.]amp(?:\/[?&]*)?$/g,""],[/((\?)|&)(?:outputType|isFollow|suppressMediaBar|cid|ICID|icid|bdk|wtu_id_h|utm_placement|intcmp|_native_ads|traffic_source|entry|\.tsrc|autoplay|autostart|dc_data|influencer|pubdate|utm_hp_ref|redirect|service|refresh_ce|refresh_cens|xcmg|target_id|_amp)=[^&]*/g,"$2"],[/(\?|&)(?:amp)(?:&|$|=[^&]*)/g,"$1"]],wn=[[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""],[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""]],cr=i((n,e)=>{for(let[t,r]of n)e=e.replace(t,r);return e},"replaceByRules"),mr=i(n=>{let e=cr(bn,n);return cr(wn,e)},"normalizeUrl");s();a();var gr=i(n=>n.split("?",1)[0].split("#",1)[0],"stripUrlQuery");s();a();var pr=i((n,e)=>{try{let t=new URLSearchParams(n),r=t.get("ctx"),o=t.get("cmp");if(r!=null&&o!=null)return{ctx:r,cmp:o,prefetch:e,legacy:!0}}catch(t){}return null},"parseInfo"),hr=i(n=>{var e;return n.pathname!=="/signals/pub.js"?null:(e=pr(n.search,!0))!=null?e:pr(n.hash.substring(1),!1)},"parseLegacyPagetagUrl");var Cn=1e3,Dn=/^\/dvtag\/([^/]+)\/([^/]+)\/pub\.js$/,D=class{constructor(){u(this,"visit");u(this,"tagInfo");u(this,"plugins",{newVisit:i(e=>[],"newVisit"),overrideTagInfo:i(e=>[],"overrideTagInfo")});u(this,"_normalizeUrl",mr)}_initialize(){this.getTagInfo(),this.updateVisit(!1),this.plugins.newVisit(this.visit),this._installNavigationListener()}getTagInfo(){var e;if(this.tagInfo==null){try{this.tagInfo=this._parseTagInfo()}catch(r){}(e=this.tagInfo)!=null||(this.tagInfo={ctx:"unknown",cmp:"unknown"});let t=this.plugins.overrideTagInfo(this.tagInfo);t.length>0&&(this.tagInfo=L(L({},this.tagInfo),t[0]))}return this.tagInfo}_parseTagInfo(){let e=this.getCurrentScriptSrc();if(e==null)return null;let t=new URL(e,"https://pub.doubleverify.com"),r=t.pathname,o=Dn.exec(r);if(o!=null){let[,l,c]=o;return{ctx:l,cmp:c}}return hr(t)}getCurrentScriptSrc(){var e,t;return(t=(e=this.core.window.document.currentScript)==null?void 0:e.getAttribute("src"))!=null?t:null}updateVisit(e=!0){var r,o;let t=this.getStrippedPageUrl();if(this.visit==null||this.visit.strippedUrl!==t){let l=ve();this.visit={strippedUrl:t,normalizedUrl:this._normalizeUrl(this.core.window.location.href),uuid:l,sessionUuid:(o=(r=this.visit)==null?void 0:r.sessionUuid)!=null?o:l},e&&this.plugins.newVisit(this.visit)}return this.visit}getVisit(){var e;return(e=this.visit)!=null?e:this.updateVisit(!1)}getStrippedPageUrl(){return gr(this.core.window.location.href)}getNormalizedPageUrl(){return this.getVisit().normalizedUrl}getVisitUuid(){return this.getVisit().uuid}getSessionUuid(){return this.getVisit().sessionUuid}_installNavigationListener(){var r;let{window:e}=this.core,t=i(()=>this.updateVisit(!0),"cb");((r=e.navigation)==null?void 0:r.addEventListener)!=null?e.navigation.addEventListener("navigatesuccess",t):setInterval(t,Cn)}};i(D,"Context"),d([R],D.prototype,"_initialize",1),D=d([g],D);s();a();s();a();var $t=class $t{constructor(){u(this,"pending",[]);u(this,"flushing",!1)}push(e){this.pending.push(e),this.flush()}flush(){return E(this,null,function*(){var t;if(this.flushing)return;this.flushing=!0;let e=this.pending.shift();for(;e!=null;){try{yield e.promise}catch(r){}try{(t=e.callback)==null||t.call(e)}catch(r){}e=this.pending.shift()}this.flushing=!1})}};i($t,"AsyncQueue");var Et=$t;var _=class{constructor(){u(this,"plugins",{adRequestQueued:i(e=>[],"adRequestQueued"),adRequestTimedOut:i(e=>[],"adRequestTimedOut"),adRequestBeforeRelease:i(e=>[],"adRequestBeforeRelease"),adRequestCompleted:i(e=>[],"adRequestCompleted")});u(this,"queue",new Et);u(this,"adRequestCounter",0)}_queueAdRequest(e={}){var l,c;let t={index:this.adRequestCounter++,status:"queued",timeoutValue:(l=e.timeout)!=null?l:0,onDvtagReadyCalled:(c=e.timestamp)!=null?c:0,waitingStarted:new Date().getTime(),internal:e.internal};this.core.get(D).updateVisit(),this.plugins.adRequestQueued(t);let r=e.callback;r===void 0?e.callback=()=>{}:r===null?t.status="tag-timeout":e.callback=()=>{t.status="queue-timeout",t.callbackCalled=new Date().getTime(),e.callback=null,this.plugins.adRequestTimedOut(t);try{r()}catch(h){}};let o=i(()=>{if(e.callback!=null){e.callback=null,t.status="success",t.callbackCalled=new Date().getTime(),this.plugins.adRequestBeforeRelease(t);try{r==null||r()}catch(h){}}else this.plugins.adRequestBeforeRelease(t);t.waitingEnded=new Date().getTime(),this.plugins.adRequestCompleted(t)},"onAsyncOperationsCompleted");this.queue.push({callback:o,adRequest:t})}delayAdRequests(e){this.queue.push({promise:e})}};i(_,"AdRequestQueue"),d([J("queueAdRequest")],_.prototype,"_queueAdRequest",1),_=d([g],_);s();a();s();a();s();a();var W=class{getShortCommitId(){return"47113ca"}getBuildTimestamp(){return 1747252825012}getAuthToken(){return"wsF7/afPUoDkhcUVFKLOG89jcgAuKNeuOrhIyGxZN5qc+88cBD3KTt3Ot84iDtyz+G17kaS4f5klRtn7RAC3SBWghBeJnnyfpAvILH5u0wwPYPQIJT1K8SffFg2ZlSFacpoWKs4cMGHOnbHlbyj7YR8VvpTbapQ="}};i(W,"DefinedVariables"),W=d([g],W);var Z=class{constructor(){u(this,"cache",{})}_performFetchJson(e,t){return E(this,null,function*(){let r=e;if(t!=null&&t.authToken){let c=this.core.get(W).getAuthToken(),h=new URL(e);h.searchParams.set("token",c),r=h.href}let o=yield this.core.window.fetch(r);return{json:yield o.json(),headers:o.headers}})}fetchJson(e,t){return E(this,null,function*(){let r=this.cache[e];return r==null&&(r=this._performFetchJson(e,t).then(o=>o.json),this.cache[e]=r),r})}};i(Z,"Fetch"),Z=d([g],Z);s();a();var ct=["BSC","ABS","CCT","CBS"],Vt=["IDS"],mt=["VLP","TVP"],Pn=[...ct,...Vt,...mt],jl=[...ct,...Vt,...mt].filter(n=>n!=="CCT"),fr=i(n=>Pn.includes(n.toUpperCase()),"isSignal"),vr=i(n=>mt.includes(n.toUpperCase()),"isSlotSignal"),Sr=i(n=>Vt.includes(n.toUpperCase()),"isUserSignal"),Er=i(n=>ct.includes(n.toUpperCase()),"isPageSignal");s();a();s();a();var Tt=i(n=>n==null?"":`@${n}`,"getPositionSuffix");s();a();var xn=/^(\d+)x(\d+)$/,Tr=i(n=>n==="all"?[]:n.split(",").map(e=>{let t=e.match(xn);return t==null?{label:e}:{width:parseInt(t[1],10),height:parseInt(t[2],10)}}),"stringToSlotSizes"),jt=i(n=>n.length===0?"all":n.map(({width:e,height:t,label:r})=>r!=null?r:`${e}x${t}`).join(","),"slotSizesToString"),yr=i(n=>n==null?"":n.length>0&&n.every(({label:r})=>r==null)?jt(n):"","slotSizesToStringIfSpecific");var On="https://pub.doubleverify.com/dvtag/signals/",ee=class{_getBaseUrl(e){let t=this.core.get(D),{ctx:r,cmp:o}=t.getTagInfo(),l=t.getNormalizedPageUrl();try{l=new URL(l).origin}catch(h){}let c=new URL(e,On);return c.searchParams.set("ctx",r),c.searchParams.set("cmp",o),c.searchParams.set("url",l),c}getUserTargetingUrl(e){let t=this._getBaseUrl("ids/pub.json");return e.includes("IDS")&&t.searchParams.set("ids","1"),t.href}getPageTargetingUrl(e,t){let r=this._getBaseUrl("bsc/pub.json");return r.searchParams.set("url",t),e.includes("BSC")&&r.searchParams.set("bsc","1"),e.includes("ABS")&&r.searchParams.set("abs","1"),e.includes("CBS")&&r.searchParams.set("cbs","1"),e.includes("CCT")&&r.searchParams.set("cct","1"),r.href}getSlotTargetingUrl(e,t){var l;let r=this._getBaseUrl("vlp/pub.json");e.includes("VLP")&&r.searchParams.set("vlp","1"),e.includes("TVP")&&r.searchParams.set("tvp","1");let o=0;for(let c of t){let{id:h,position:v,sizes:y}=(l=c.adUnit)!=null?l:{},C=h+Tt(v);r.searchParams.set(`slot-${o++}-${C}`,yr(y))}return r.href}};i(ee,"SignalsUrlBuilder"),ee=d([g],ee);var Pe=class{constructor(){u(this,"cache",{})}_fetchFreshSignals(e,t){return E(this,null,function*(){if(!t.some(Er))return{};let r=this.core.get(ee).getPageTargetingUrl(t,e),o;try{o=yield this.core.get(Z).fetchJson(r,{authToken:!0})}catch(l){return{}}return o instanceof Object?o:{}})}fetchSignals(e,t=3){return E(this,null,function*(){let r=this.core.get(D),o=r.getNormalizedPageUrl(),l=r.getStrippedPageUrl();this.cache[l]==null&&(this.cache[l]=this._fetchFreshSignals(o,e));let c=yield this.cache[l];return this.core.get(D).getStrippedPageUrl()!==l&&t>0?this.fetchSignals(e,t-1):c})}};i(Pe,"PageSignals"),Pe=d([g],Pe);s();a();var xe=class{constructor(){u(this,"cache",{});u(this,"pendingSlots",[]);u(this,"pendingBulkRequest",null)}_scheduleBulkRequest(e){return E(this,null,function*(){yield Promise.resolve();let t=this.core.get(ee).getSlotTargetingUrl(e,this.pendingSlots);this.pendingSlots=[],this.pendingBulkRequest=null;let r;try{r=yield this.core.get(Z).fetchJson(t,{authToken:!0})}catch(o){return[]}return r})}_fetchFreshSignals(e,t){return E(this,null,function*(){if(!t.some(vr))return{};let r=this.pendingSlots.push(e)-1;this.pendingBulkRequest==null&&(this.pendingBulkRequest=this._scheduleBulkRequest(t));let l=(yield this.pendingBulkRequest)[r];return l instanceof Object?l:{}})}_getCacheKey(e){var h,v;let{id:t,position:r,sizes:o}=(h=e.adUnit)!=null?h:{},l=t+Tt(r),c=(v=o==null?void 0:o.map(y=>{var C;return(C=y.label)!=null?C:`${y.width}x${y.height}`}).sort().join(","))!=null?v:"";return`${l}#${c}`}fetchSignals(e,t){return E(this,null,function*(){let r=this._getCacheKey(e);return this.cache[r]==null&&(this.cache[r]=this._fetchFreshSignals(e,t)),this.cache[r]})}};i(xe,"SlotSignals"),xe=d([g],xe);s();a();var Oe=class{constructor(){u(this,"cache")}_fetchFreshSignals(e){return E(this,null,function*(){if(!e.some(Sr))return{};let t=this.core.get(ee).getUserTargetingUrl(e),r;try{r=yield this.core.get(Z).fetchJson(t,{authToken:!0})}catch(o){return{}}return r instanceof Object?r:{}})}fetchSignals(e){return E(this,null,function*(){return this.cache==null&&(this.cache=this._fetchFreshSignals(e)),this.cache})}};i(Oe,"UserSignals"),Oe=d([g],Oe);var I=class{constructor(){u(this,"plugins",{getEnabledSignals:i(()=>[],"getEnabledSignals"),userTargetingUpdated:i(e=>[],"userTargetingUpdated"),pageTargetingUpdated:i(e=>[],"pageTargetingUpdated"),slotTargetingUpdated:i((e,t)=>[],"slotTargetingUpdated")});u(this,"dataForMigrationTracking",{userTargeting:{},pageTargeting:{},slotTargeting:new Map})}getEnabledSignals(){return this.plugins.getEnabledSignals()}getDataForMigrationTracking(){return this.dataForMigrationTracking}_initialize(){this.getUserTargeting(),this.getPageTargeting()}_onAdRequestQueued(){this.getPageTargeting()}_onSlotDiscovered(e){this.getSlotTargeting(e)}getUserTargeting(){return E(this,null,function*(){let e=this._fetchUserTargeting();return this.core.get(_).delayAdRequests(e),e})}getPageTargeting(){return E(this,null,function*(){let e=this._fetchPageTargeting();return this.core.get(_).delayAdRequests(e),e})}getSlotTargeting(e){return E(this,null,function*(){let t=this._fetchSlotTargeting(e);return this.core.get(_).delayAdRequests(t),t})}_fetchUserTargeting(){return E(this,null,function*(){let e=yield this.core.get(Oe).fetchSignals(this.getEnabledSignals());return this.core.get(b).setGlobalTargeting(e),this.dataForMigrationTracking.userTargeting=e,this.plugins.userTargetingUpdated(e),e})}_fetchPageTargeting(){return E(this,null,function*(){let e=yield this.core.get(Pe).fetchSignals(this.getEnabledSignals());return this.core.get(b).setGlobalTargeting(e),this.dataForMigrationTracking.pageTargeting=e,this.plugins.pageTargetingUpdated(e),e})}_fetchSlotTargeting(e){return E(this,null,function*(){let t=yield this.core.get(xe).fetchSignals(e,this.getEnabledSignals());return this.core.get(b).setSlotTargeting(e,t),this.dataForMigrationTracking.slotTargeting.set(e,t),this.plugins.slotTargetingUpdated(e,t),t})}};i(I,"Signals"),d([R],I.prototype,"_initialize",1),d([f(_,"adRequestQueued")],I.prototype,"_onAdRequestQueued",1),d([f(A,"slotDiscovered")],I.prototype,"_onSlotDiscovered",1),I=d([g],I);s();a();var te=class{constructor(){u(this,"pq",null)}getPq(){return this.pq==null&&(this.pq=this._initialize()),this.pq}getPts(){return this.getPq().PTS}setApi(e){let t=this.getPq();t!=null&&(t.init=()=>{},t.loadSignals=e.loadSignals,t.loadSignalsForSlots=e.loadSignalsForSlots,t.getTargeting=e.getTargeting)}_pushToDvtagCmd(...e){var t;this.core.dvtag.cmd=(t=this.core.dvtag.cmd)!=null?t:[],this.core.dvtag.cmd.push(...e)}_initialize(){var r,o;this.core.window.PQ=(r=this.core.window.PQ)!=null?r:{};let e=this.core.window.PQ;if(e.loaded)return{cmd:[],PTS:{}};e.loaded=!0,e.PTS=(o=e.PTS)!=null?o:{};let t=e.cmd;return e.cmd={push:i(l=>this._pushToDvtagCmd(l),"push")},Array.isArray(t)&&this._pushToDvtagCmd(...t),e}};i(te,"LegacyPq"),te=d([g],te);s();a();var Ar=i(n=>{var r,o,l;let e=ve(),t={id:(o=(r=n.adUnitPath)!=null?r:n.invCode)!=null?o:n.tagId,sizes:et(Tr((l=n.sizes)!=null?l:"all")),position:n.position};return{elementId:e,adUnit:t}},"parseLegacyAdUnit");s();a();var _r=i((n,e)=>{var o;let t=(o=n.IDS)==null?void 0:o[0];if(t==null)return;let r=parseInt(t);isNaN(r)||(e.IDS=r)},"setUserTargetingOnPts"),Rr=i((n,e)=>{for(let t of ct)n[t]!=null&&(e[t]=n[t])},"setPageTargetingOnPts"),br=i((n,e,t)=>{var h,v,y,C,he,fe;let{adUnit:r}=n;if((r==null?void 0:r.id)==null)return;let o=r.id,l=jt((h=r.sizes)!=null?h:[]),c=r.position;for(let U of mt){let Ie=e[U];Ie!=null&&((v=t[U])!=null||(t[U]={}),(C=(y=t[U])[o])!=null||(y[o]={}),t[U][o][l]=Ie[0],c!=null&&((fe=(he=t[U][o])[c])!=null||(he[c]={}),t[U][o][c][l]=Ie[0]))}},"setSlotTargetingOnPts");var Se=class extends P{_initialize(){this.core.get(te).setApi({loadSignals:this.loadSignals.bind(this),loadSignalsForSlots:this.loadSignalsForSlots.bind(this),getTargeting:this.getTargeting.bind(this)})}_setUserTargetingOnPts(e){let t=this.core.get(te).getPts();_r(e,t)}_setPageTargetingOnPts(e){let t=this.core.get(te).getPts();Rr(e,t)}_setSlotTargetingOnPts(e,t){let r=this.core.get(te).getPts();br(e,t,r)}loadSignals(e,t){return E(this,null,function*(){yield this._onDvtagReady("loadSignals",t)})}loadSignalsForSlots(e,t,r){return E(this,null,function*(){let o=this.core.get(I),l=this.core.get(A);for(let h of e){let v=h.getSlotElementId(),y=l.getSlot("gpt",v);if(y==null){let C=this.core.get(F).getAdPositionKey(h.getAdUnitPath());y=l.createSlot("gpt",0,v,St(h,C))}o.getSlotTargeting(y)}let c=typeof t=="function"?t:r;yield this._onDvtagReady("loadSignalsForSlots",c)})}getTargeting(e,t){return E(this,null,function*(){var c;let r=this.core.get(I),o=this.core.get(A);for(let h of(c=e.adUnits)!=null?c:[]){let{elementId:v,adUnit:y}=Ar(h),C=o.createSlot("legacy-api",0,v,y);r.getSlotTargeting(C)}let l=i(()=>t==null?void 0:t(void 0,this.core.get(te).getPts()),"callback");yield this._onDvtagReady("getTargeting",l)})}_getPubAdsTargeting(e){var t,r,o;return(o=(r=(t=this.core.window.googletag)==null?void 0:t.pubads)==null?void 0:r.call(t).getTargeting(e))!=null?o:[]}_onDvtagReady(e,t){return E(this,null,function*(){yield new Promise(r=>{this.core.window.dvtag.queueAdRequest({callback:i(()=>{try{t==null||t()}catch(o){}r()},"callback"),timestamp:new Date().getTime(),timeout:750,internal:!0})})})}};i(Se,"LegacyLayer"),d([R],Se.prototype,"_initialize",1),d([f(I,"userTargetingUpdated")],Se.prototype,"_setUserTargetingOnPts",1),d([f(I,"pageTargetingUpdated")],Se.prototype,"_setPageTargetingOnPts",1),d([f(I,"slotTargetingUpdated")],Se.prototype,"_setSlotTargetingOnPts",1),Se=d([g],Se);s();a();var Ge=class extends P{_getEnabledSignals(){return"IDS"}};i(Ge,"SignalsIds"),d([f(I,"getEnabledSignals")],Ge.prototype,"_getEnabledSignals",1),Ge=d([g],Ge);s();a();var We=class extends P{_getEnabledSignals(){return"BSC"}};i(We,"SignalsBsc"),d([f(I,"getEnabledSignals")],We.prototype,"_getEnabledSignals",1),We=d([g],We);s();a();var Qe=class extends P{_getEnabledSignals(){return"VLP"}};i(Qe,"SignalsVlp"),d([f(I,"getEnabledSignals")],Qe.prototype,"_getEnabledSignals",1),Qe=d([g],Qe);s();a();var Ye=class extends P{_getEnabledSignals(){return"TVP"}};i(Ye,"SignalsTvp"),d([f(I,"getEnabledSignals")],Ye.prototype,"_getEnabledSignals",1),Ye=d([g],Ye);s();a();var ze=class extends P{_getEnabledSignals(){return"ABS"}};i(ze,"SignalsAbs"),d([f(I,"getEnabledSignals")],ze.prototype,"_getEnabledSignals",1),ze=d([g],ze);s();a();s();a();s();a();var T=class{constructor(){u(this,"_timeFun")}window(){return this.core.window}document(){return this.window().document}pageUrl(){var e,t;return(t=(e=this.window().location)==null?void 0:e.href)!=null?t:""}hostname(){return new URL(this.pageUrl()).hostname}time(){if(this._timeFun==null){let e=this.window(),t=!1;try{t=typeof e.performance.now()=="number"}catch(r){}t?this._timeFun=()=>Math.floor(e.performance.now()):this._timeFun=()=>e.Date.now()}return this._timeFun()}sendBeacon(e){try{let t=this.window().navigator;typeof(t==null?void 0:t.sendBeacon)=="function"?t.sendBeacon(e):new Image().src=e}catch(t){}}};i(T,"Env"),T=d([g],T);s();a();var Re=class{constructor(){u(this,"plugins",{adRemoved:i(e=>[],"adRemoved")})}_monitorAdRemoval(e){let t=this.core.get(T).document().getElementById(e.elementId);if(t==null)return;S.Create({parent:e,observer:new MutationObserver(o=>{let l=o.length,c=0,h=t.children.length;for(let v=o.length-1;v>=0;v--){let y=o[v];if(h===0){this.plugins.adRemoved(e);break}if(c===l-1)break;let C=y.removedNodes.length-y.addedNodes.length;h+=C,c++}})},({parent:o,observer:l})=>{l.disconnect(),this.plugins.adRemoved(o)}).observer.observe(t,{childList:!0})}};i(Re,"AdRemoved"),d([f(A,"slotDiscovered")],Re.prototype,"_monitorAdRemoval",1),Re=d([g],Re);var w=class{constructor(){u(this,"adEmpty",new S.Map);u(this,"adRequestInFlight",new S.Map);u(this,"nonEmptyAdResponses",new S.Map);u(this,"creatives",new S.Link);u(this,"plugins",{adRequested:i(e=>[],"adRequested"),adRequestedOrInferred:i(e=>[],"adRequestedOrInferred"),adRendered:i((e,t)=>[],"adRendered"),adRemoved:i(e=>[],"adRemoved")})}setAdRequested(e){this.adRequestInFlight.set(e,!0),this.plugins.adRequested(e),this.plugins.adRequestedOrInferred(e)}setAdRendered(e,t){this.adRequestInFlight.get(e)!==!0&&this.plugins.adRequestedOrInferred(e),this._setAdRemoved(e),this.adEmpty.set(e,!1),this.adRequestInFlight.set(e,!1),t!=null&&this.nonEmptyAdResponses.set(e,this.nonEmptyAdResponses.summon(e,0)+1);let r=null;if(t!=null){let o=this.core.get(T).time();r=S.Create(L({parent:e,timestamp:o},t)),this.creatives.get(e).add(r)}this.plugins.adRendered(e,r)}_setAdRemoved(e){if(this.adEmpty.get(e)===!1){this.adEmpty.set(e,!0);for(let t of this.creatives.get(e))t.destroy();this.plugins.adRemoved(e)}}getNonEmptyAdRenderedCount(e){return this.nonEmptyAdResponses.summon(e,0)}};i(w,"AdServerHub"),d([f(Re,"adRemoved")],w.prototype,"_setAdRemoved",1),w=d([g],w);s();a();s();a();s();a();var At=i(n=>{if(typeof n=="string"||Array.isArray(n)&&n.length===2&&n.every(e=>typeof e=="number"))return n;if(n!=null&&typeof n.width=="number"&&typeof n.height=="number")return[n.width,n.height]},"cleanSizeInput");s();a();var Q=i(n=>{if(typeof n=="string")return n;if(typeof n=="number")return`${n}`},"cleanStringInput");s();a();var re=class{getPubAds(){var t,r;let e=this.core.get(T).window();try{return(r=(t=e.googletag)==null?void 0:t.pubads)==null?void 0:r.call(t)}catch(o){return}}onPubAdsReady(e){var o,l,c,h;let t=this.core.get(T).window();t.googletag=(o=t.googletag)!=null?o:{},t.googletag.cmd=(l=t.googletag.cmd)!=null?l:[];let r=this.getPubAds();if(r!=null)e(r);else try{(h=(c=t.googletag.cmd)==null?void 0:c.push)==null||h.call(c,()=>{r=this.getPubAds(),r!=null&&e(r)})}catch(v){}}};i(re,"GoogletagPubAds"),re=d([g],re);s();a();var Y=class{constructor(){u(this,"gptReference",new S.Map)}_scanForSlots(){this.core.get(re).onPubAdsReady(e=>{e.getSlots().map(t=>this.maybeDiscoverSlot(t,0))})}getGptSlot(e){return this.gptReference.get(e)}maybeDiscoverSlot(e,t){let r=this.core.get(A).getSlot("gpt",e.getSlotElementId());return r==null||this.gptReference.get(r)!==e?this._createSlot(e,t):r}_createSlot(e,t){let r=e.getSlotElementId(),o=e.getAdUnitPath(),l=vt(o),c=this.core.get(F).getAdPositionKey(l),h=St(e,c);return this.core.get(A).createSlot("gpt",t,r,h,y=>this.gptReference.set(y,e))}};i(Y,"GoogletagSlots"),d([R,f(_,"adRequestQueued")],Y.prototype,"_scanForSlots",1),Y=d([g],Y);var Ee=class{constructor(){u(this,"plugins",{adRequested:i(e=>[],"adRequested"),adRendered:i((e,t)=>[],"adRendered")})}_getHtmlSafe(e){var t,r;try{return(r=(t=e.getHtml)==null?void 0:t.call(e))!=null?r:void 0}catch(o){return}}_initialize(){this.core.get(re).onPubAdsReady(e=>{e.addEventListener("slotRequested",t=>{let r=this.core.get(Y).maybeDiscoverSlot(t.slot,1);this.plugins.adRequested(r)}),e.addEventListener("slotRenderEnded",t=>{let r=this.core.get(Y).maybeDiscoverSlot(t.slot,2);if(t.isEmpty){this.plugins.adRendered(r,null);return}let o={type:"display",advertiserId:Q(t.advertiserId),campaignId:Q(t.campaignId),creativeId:Q(t.creativeId),lineItemId:Q(t.lineItemId),renderedSize:At(t.size),html:this._getHtmlSafe(t.slot)};this.plugins.adRendered(r,o)})})}};i(Ee,"GoogletagEvents"),d([R],Ee.prototype,"_initialize",1),Ee=d([g],Ee);s();a();s();a();var Ht=i(n=>typeof n=="string"||typeof n=="number"?[`${n}`]:n instanceof Array?_e(n.filter(e=>typeof e=="string"||typeof e=="number").map(e=>`${e}`)):[],"cleanTargetingInput");var be=class{getAdServerTargeting(e,t){var l,c,h;if(e.adServer!=="gpt")return[];let r=[];try{r=Ht((c=(l=this.core.get(re).getPubAds())==null?void 0:l.getTargeting)==null?void 0:c.call(l,t))}catch(v){}let o=[];try{o=Ht((h=this.core.get(Y).getGptSlot(e))==null?void 0:h.getTargeting(t))}catch(v){}return _e(r,o)}setAdServerTargeting(e,t,r){var o;if(e.adServer==="gpt")try{(o=this.core.get(Y).getGptSlot(e))==null||o.setTargeting(t,r)}catch(l){}}};i(be,"GoogletagTargeting"),be=d([g],be);var V=class{_onAdRequested(e){this.core.get(w).setAdRequested(e)}_onAdRendered(e,t){this.core.get(w).setAdRendered(e,t)}_getAdServerTargeting(e,t){return e.adServer!=="gpt"?[]:this.core.get(be).getAdServerTargeting(e,t)}_setAdServerTargeting(e,t,r){e.adServer==="gpt"&&this.core.get(be).setAdServerTargeting(e,t,r)}};i(V,"Googletag"),d([f(Ee,"adRequested")],V.prototype,"_onAdRequested",1),d([f(Ee,"adRendered")],V.prototype,"_onAdRendered",1),d([f(b,"getAdServerTargeting")],V.prototype,"_getAdServerTargeting",1),d([f(b,"setAdServerTargeting")],V.prototype,"_setAdServerTargeting",1),V=d([g],V);s();a();s();a();s();a();var Ln=126,Nn=20,Mn=250,se=class{constructor(){u(this,"firstResultPromise",new S.Map);u(this,"consent",new S.Map)}getConsent(){return L({},this.consent.conjure(this.core.session,()=>({apiAvailable:!1,applies:"",tcString:""})))}getConsentAsync(){return E(this,null,function*(){return yield this._getConsentPromise(),this.getConsent()})}_getConsentPromise(){return E(this,null,function*(){return this.firstResultPromise.conjure(this.core.session,()=>this._monitorConsent()).catch(()=>{})})}_monitorConsent(){return E(this,null,function*(){let e=yield this._getTcfApiAsync();e!=null&&(yield new Promise(t=>{try{e("addEventListener",2,(r,o)=>{o===!0&&this._setConsent(r),t()},[Ln])}catch(r){t()}}))})}_getTcfApiAsync(){return E(this,null,function*(){let e=this.core.get(T).window(),t=this._getTcfApi(),r=0;for(;t==null&&r<Nn;)r++,yield new Promise(o=>e.setTimeout(o,Mn)),t=this._getTcfApi();return t})}_getTcfApi(){let t=this.core.get(T).window().__tcfapi;if(typeof t=="function")return t}_setConsent(e){let t;e.gdprApplies===!0||e.gdprApplies===1?t="1":e.gdprApplies===!1||e.gdprApplies===0?t="0":t="";let r=typeof e.tcString=="string"?e.tcString:"";this.consent.set(this.core.session,{apiAvailable:!0,applies:t,tcString:r})}};i(se,"GdprConsent"),d([R],se.prototype,"_getConsentPromise",1),se=d([g],se);s();a();var Un="https://vtrk.doubleverify.com",wr="dvtag",kn=1,Fn=1,x=class{constructor(){u(this,"sharedDataPoints")}_onAdRequestCompleted(e){if(e.index!==0)return;let{timeoutValue:t,onDvtagReadyCalled:r,callbackCalled:o}=e,l=o!=null?o-r:t,{applies:c,apiAvailable:h}=this.core.get(se).getConsent();this.fireEvent("ad-request",{cd111:e.status,cm106:e.index,cm107:l,cd112:e.internal?"legacy":"modern",cd115:c,cm116:h?1:0},{sampleInterval:Fn})}_handleError(e){this.fireEvent("log",{cd111:"error",cd112:e.message,cd113:e.trace.join("=>")},{sampleInterval:kn})}_getSharedDataPoints(){if(this.sharedDataPoints==null){let e=this.core.get(D),t=this.core.get(W),r=this.core.get(T),{ctx:o,cmp:l,legacy:c}=e.getTagInfo(),h=r.hostname(),v=e.getSessionUuid(),y=t.getShortCommitId();this.sharedDataPoints={cd102:y,cd103:"",cd107:v,cd109:c?"legacy":"modern",cd108:"",cd105:o,cd106:l,cd104:h}}return this.sharedDataPoints}fireEvent(e,t,{sampleInterval:r=1,trackerUuid:o=ve(),spoofWrapperId:l=!1}={}){if(Math.random()>=1/r)return;t=Ve(L(L({},t),this._getSharedDataPoints()),{cd101:e,cm101:r});let c=Ve(L({ec:wr,ea:t.cd101,ctx:l?wr:t.cd105,cmp:t.cd106},t),{cid:o,t:"event",v:1,z:o,cd160:o}),h=new URL(Un);for(let[v,y]of Object.entries(c))y!=null&&h.searchParams.set(v,`${y}`);this.core.get(T).sendBeacon(h.href)}};i(x,"Events"),d([f(_,"adRequestCompleted")],x.prototype,"_onAdRequestCompleted",1),d([sr],x.prototype,"_handleError",1),x=d([g],x);s();a();var qn=.01,ae=class{constructor(){u(this,"plugins",{overrideActivationRate:i(()=>[],"overrideActivationRate")});u(this,"_random",Math.random);u(this,"_falconEnabled")}isFalconEnabled(){var e;if(this._falconEnabled==null){let t=(e=this.plugins.overrideActivationRate()[0])!=null?e:qn;this._falconEnabled=this._random()<t}return this._falconEnabled}};i(ae,"FalconTest"),ae=d([g],ae);s();a();s();a();var z=class{observe(e,t,r){try{t.observe(r)}catch(o){}return S.Create({parent:e!=null?e:this.core.session},()=>t.disconnect())}addEventListener(e,t,r,o){try{t.addEventListener(r,o)}catch(l){}return S.Create({parent:e},()=>{t.removeEventListener(r,o)})}};i(z,"Subscriptions"),z=d([g],z);var $n=5e3,M=class{constructor(){u(this,"plugins",{pageVisible:i(()=>[],"pageVisible"),pageHide:i(()=>[],"pageHide"),pageHideThrottled:i(()=>[],"pageHideThrottled")});u(this,"hidden",new S.Map);u(this,"lastFiredThrottled",new S.Map)}_initialize(){this._installListeners(),this._maybeFirePlugins()}_installListeners(){let e=this.core.get(T).window(),t=this.core.get(T).document();this.core.get(z).addEventListener(this.core.session,t,"visibilitychange",()=>this._maybeFirePlugins());for(let r of["pagehide","pageshow"])this.core.get(z).addEventListener(this.core.session,e,r,()=>this._maybeFirePlugins())}isHidden(){let e=this.core.get(T).document();return e.hidden===!0||e.visibilityState==="hidden"}_maybeFirePlugins(){let e=this.hidden.get(this.core.session),t=this.isHidden();if(this.hidden.set(this.core.session,t),e!==t&&this.plugins[t?"pageHide":"pageVisible"](),t){let r=this.core.get(T).time(),o=this.lastFiredThrottled.get(this.core.session);if(o!=null&&r-o<=$n)return;this.lastFiredThrottled.set(this.core.session,r),this.plugins.pageHideThrottled()}}};i(M,"PageVisibility"),d([R],M.prototype,"_initialize",1),M=d([g],M);s();a();var j=class{setTimeout(e,t,r,o=!1){let l=this.core.get(T).window(),c=i(()=>{try{t()}catch(y){}c=i(()=>{},"callbackOnce")},"callbackOnce"),h=S.Create({parent:e},()=>{l.clearTimeout(v),o&&c()}),v=l.setTimeout(()=>{c(),h.destroy()},r);return h}setInterval(e,t,r,o=!1){let l=this.core.get(T).window(),c=i(()=>{try{t()}catch(v){}},"callbackSafe"),h=l.setInterval(c,r);return S.Create({parent:e},()=>{l.clearInterval(h),o&&c()})}};i(j,"Timeouts"),j=d([g],j);s();a();var le=class{constructor(){u(this,"_count",0);u(this,"plugins",{onCountUpdated:i(e=>[],"onCountUpdated")})}getCount(){return this._count}increment(){this._count+=1,this.plugins.onCountUpdated(this._count)}decrement(){this._count-=1,this.plugins.onCountUpdated(this._count)}};i(le,"MeasurementScriptCounter"),le=d([g],le);var Vn="blockingtime",jn=5*60*1e3,Hn=60*1e3,Bn=20;var de=class{constructor(){u(this,"monitors",new S.Set);u(this,"state",new S.Map)}_getMonitor(){return this.monitors.conjure(()=>S.Create({parent:this.core.session}))}_getState(){return this.state.conjure(this._getMonitor(),()=>({trackerCount:0,monitorStart:this.core.get(T).time(),lastAvgScriptCountUpdate:this.core.get(T).time(),summedBlockingTime:0,totalLongTaskTime:0,longTaskCount:0,avgScriptCountNumerator:0,currentScriptCount:0,lastTrackerSent:void 0,scriptInsertions:0}))}_initialize(){var o;let e=this._getMonitor(),t=this._getState(),{PerformanceObserver:r}=this.core.get(T).window();r==null||((o=r.supportedEntryTypes)==null?void 0:o.includes("longtask"))!==!0||(this.core.get(z).observe(e,new r(l=>l.getEntries().forEach(c=>{let h=Math.max(0,c.duration-50);t.totalLongTaskTime+=c.duration,t.longTaskCount+=1,t.summedBlockingTime+=h})),{type:"longtask",buffered:!0}),this.core.get(j).setTimeout(e,()=>{this._sendTracker(),this._getMonitor().destroy()},jn))}_onScriptCountUpdate(e){let t=this._getState();t.scriptInsertions+=e>t.currentScriptCount?1:0,this._updateAvgScriptCount(),t.currentScriptCount=e}_updateAvgScriptCount(){let e=this._getState();e.avgScriptCountNumerator+=e.currentScriptCount*(this.core.get(T).time()-e.lastAvgScriptCountUpdate),e.lastAvgScriptCountUpdate=this.core.get(T).time()}_sendTracker(){let e=this._getState();if(e.lastTrackerSent!=null&&this.core.get(T).time()-e.lastTrackerSent<Hn)return;this._updateAvgScriptCount();let t=this.core.get(T).time()-e.monitorStart,r={cd110:this.core.get(ae).isFalconEnabled()?"falcon":"cdn",cm106:e.trackerCount,cm107:t,cm108:e.summedBlockingTime,cm109:e.totalLongTaskTime,cm110:e.longTaskCount,cm111:e.avgScriptCountNumerator/t,cm112:e.scriptInsertions};this.core.get(x).fireEvent(Vn,r,{spoofWrapperId:!0}),e.trackerCount+=1,e.lastTrackerSent=this.core.get(T).time(),e.trackerCount>=Bn&&this._getMonitor().destroy()}};i(de,"BlockingTimeMonitor"),d([R],de.prototype,"_initialize",1),d([f(le,"onCountUpdated")],de.prototype,"_onScriptCountUpdate",1),d([f(M,"pageHideThrottled")],de.prototype,"_sendTracker",1),de=d([g],de);s();a();s();a();var Gn=Object.defineProperty,Wn=Object.defineProperties,Qn=Object.getOwnPropertyDescriptors,Cr=Object.getOwnPropertySymbols,Yn=Object.prototype.hasOwnProperty,zn=Object.prototype.propertyIsEnumerable,Dr=i((n,e,t)=>e in n?Gn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp"),gt=i((n,e)=>{for(var t in e||(e={}))Yn.call(e,t)&&Dr(n,t,e[t]);if(Cr)for(var t of Cr(e))zn.call(e,t)&&Dr(n,t,e[t]);return n},"__spreadValues"),Ir=i((n,e)=>Wn(n,Qn(e)),"__spreadProps");var rt=(n=>(n.GAM="gam",n.XANDR="xandr",n.FREEWHEEL="freewheel",n.CUSTOM="custom",n))(rt||{});var Bt=(n=>(n[n.Disabled=0]="Disabled",n[n.Dryrun=1]="Dryrun",n))(Bt||{});var Gg=typeof TextDecoder=="function"?new TextDecoder:void 0,Wg=typeof TextEncoder=="function"?new TextEncoder:void 0,Kn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Xn=Array.prototype.slice.call(Kn),Qg=(n=>{let e={};return n.forEach((t,r)=>e[t]=r),e})(Xn),Yg=String.fromCharCode.bind(String),zg=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):n=>new Uint8Array(Array.prototype.slice.call(n,0));var Jn="__DVPUB_OT__",Zn=i(n=>Jn+new URLSearchParams(n).toString().replace(/=/g,":").replace(/&/g,"|").replace(/\+/g,"%20").replace(/[^a-zA-Z0-9:|%_]/g,e=>`%${e.charCodeAt(0).toString(16)}`),"encodeParams"),Pr=i((n,e)=>Object.entries(e).reduce((r,[o,l])=>(r[`${n}${o}`]=l,r),{}),"prefixKeys"),ei=i(n=>{let e={};for(let[t,r]of Object.entries(n))e[t]=`${r}`;return e},"stringifyValues"),xr=i((n,e,t)=>{if(n==="custom"||n==="freewheel")return{};let r=ei(Ir(gt({},e.passthroughParams),{dvp_uptpid:e.pageId,dvp_uptsid:e.slotId,dvp_uptsacnt:e.slotAdCount,dvp_qtpid:e.pageId})),o=Zn(gt(gt({},e.wrapperMode!=null?{m:String(e.wrapperMode)}:{}),Pr("_",r)));return n==="gam"?Ir(gt(gt({dvpub_ot_params:o},e.wrapperMode!=null?{dv_upt_cwm:String(e.wrapperMode)}:{}),Pr("dv__",r)),{pts_pid:e.pageId,pts_sid:e.slotId}):n==="xandr"?{[t!=null?t:"pt1"]:o}:{}},"generateOmniTagTargeting");s();a();var Or=i(n=>{let e={};for(let[t,r]of Object.entries(n))r!=null&&(e[t]=typeof r=="string"?[r]:r);return e},"toTargeting");var ti={gpt:rt.GAM,ast:rt.XANDR,custom:rt.CUSTOM,"legacy-api":rt.CUSTOM},ri="pt9",H=class{constructor(){u(this,"plugins",{disableCreativeWrapperMeasurement:i(e=>[],"disableCreativeWrapperMeasurement")});u(this,"targetingSet",new S.Map);u(this,"targetingReliable",new S.Map)}_setCreativeWrapperTargeting(e){let t=e.uuid,r=this.core.get(D).getVisitUuid(),o=this.core.get(w).getNonEmptyAdRenderedCount(e),l=this.plugins.disableCreativeWrapperMeasurement(e).some(c=>c===!0)?Bt.Disabled:void 0;this.core.get(b).setSlotTargeting(e,Or(xr(ti[e.adServer],{slotId:t,pageId:r,slotAdCount:o,wrapperMode:l},ri))),this.targetingSet.set(e,!0)}_onNewVisit(){let e=this.core.get(A).getSlots();for(let t of e)this._setCreativeWrapperTargeting(t)}_onAdRequested(e){this.targetingReliable.set(e,this.targetingSet.get(e)===!0)}isTargetingReliable(e){return this.targetingReliable.get(e)===!0}};i(H,"CreativeWrapperTargeting"),d([f(A,"slotDiscovered"),f(w,"adRendered")],H.prototype,"_setCreativeWrapperTargeting",1),d([f(D,"newVisit")],H.prototype,"_onNewVisit",1),d([f(w,"adRequested")],H.prototype,"_onAdRequested",1),H=d([g],H);s();a();var Le=class{constructor(){u(this,"plugins",{shouldPerformIntentionalDuplicateMeasurement:i(e=>[],"shouldPerformIntentionalDuplicateMeasurement")})}shouldPerformIntentionalDuplicateMeasurement(e){return this.plugins.shouldPerformIntentionalDuplicateMeasurement(e).some(t=>t===!0)}};i(Le,"MeasurementFlags"),Le=d([g],Le);s();a();s();a();var Lr=i((n,e,t="")=>{if(n.length<=e)return n;let r=e-t.length;return r<0?t:n.slice(0,r)+t},"truncate");s();a();var Nr="https://cdn.doubleverify.com/dvtp_src.js",Mr="https://cdn.dv.tech/dvbm.js";s();a();var Ur={cmp:"cmp",ctx:"ctx",isSellerTag:"seltag",blocking:"blk",t2te:"t2te",deepIFrameClickHandlers:"dich",measurementActivationPath:"dvp_pubaap",unityTagBuildTimestamp:"dvp_uptbts",unityTagBuildCommitId:"dvp_uptbcid",gdprApplies:"gdpr",gdprTcString:"gdpr_consent",adServerCode:"adsrv",adServerId:"dvp_gptmasid",pageVisitId:"dvp_uptpid",slotId:"dvp_uptsid",slotElementId:"dvp_uptseid",selectedVariation:"dvp_gptmvr",selectedVariationFraction:"dvp_gptmvrfr",customDimension1:"c1",customDimension2:"c2",customDimension3:"c3",customDimension4:"c4",customDimension5:"c5",customDimension6:"c6",customDimension7:"c7",customDimension8:"c8",customDimension9:"c9",customDimension10:"c10",adPosition:"spos",qtPageId:"dvp_qtpid",qtSlotId:"dvp_qtsid",headerBidding:"dvp_gptmhb",advertiserId:"sadv",orderId:"ord",lineItemId:"litm",creativeId:"scrt",placementCode:"splc",size:"unit",slotAdCount:"dvp_uptsacnt",locatedElementType:"dvp_gptmle",adLocationMechanism:"alm",usedAdFormat:"dvp_pubuaf",adDetectionDiagnostics:"dvp_pubadd",adLocatingDiagnostics:"dvp_pubald",creativeWrapperAvailable:"dvp_gptmcw",isFalconTestEnabledDVP:"dvp_pubaft",isFalconTestEnabledEE:"ee_dp_pubaft",measurementInjectionStrategy:"dvp_gptmit"};var N=class{constructor(){u(this,"parameters",new S.Map);u(this,"_truncate",Lr)}_set(e,t){var r;this.parameters.set(e,L(L({},(r=this.parameters.get(e))!=null?r:{}),t))}_getScriptUrl(e){let t=[],r=this.parameters.summon(e,{});for(let[o,l]of Object.entries(r)){let c=Ur[o];l!=null&&t.push([c,encodeURIComponent(l)])}return`${this.core.get(ae).isFalconEnabled()?Mr:Nr}#${t.map(([o,l])=>`${o}=${l}`).join("&")}`}createScriptElement(e,t){let r=this._getScriptUrl(e),l=this.core.get(T).document().createElement("script");return l.setAttribute("src",r),l.setAttribute("async",""),l.dvAdElement=t,l}setIdentifiers(e){let{ctx:t,cmp:r}=this.core.get(D).getTagInfo();this._set(e,{ctx:t,cmp:r})}setConstants(e){this._set(e,{isSellerTag:1,t2te:0,blocking:this.core.get(ae).isFalconEnabled()?0:void 0,measurementActivationPath:2,deepIFrameClickHandlers:1,unityTagBuildTimestamp:this.core.get(W).getBuildTimestamp(),unityTagBuildCommitId:this.core.get(W).getShortCommitId()})}setGdpr(e){let t=this.core.get(se),{applies:r,tcString:o}=t.getConsent();this._set(e,{gdprApplies:r,gdprTcString:o})}setAdUnit(e){this._set(e,{adServerCode:ur(e.adServer),adServerId:this.core.get(F).getAdServerId(e.adUnit.network),pageVisitId:this.core.get(D).getVisitUuid(),slotId:e.uuid,slotElementId:this._truncate(e.elementId,30,"~")})}_getCustomDimension(e,t){var l;let o=(l=this.core.get(F).getAdServerCustomTracking(e.adUnit.network)[t])==null?void 0:l.key;return o!=null?this.core.get(b).getAdServerTargeting(e,o).join(","):void 0}setCustomDimensions(e){this._set(e,{customDimension1:this._getCustomDimension(e,"c1"),customDimension2:this._getCustomDimension(e,"c2"),customDimension3:this._getCustomDimension(e,"c3"),customDimension4:this._getCustomDimension(e,"c4"),customDimension5:this._getCustomDimension(e,"c5"),customDimension6:this._getCustomDimension(e,"c6"),customDimension7:this._getCustomDimension(e,"c7"),customDimension8:this._getCustomDimension(e,"c8"),customDimension9:this._getCustomDimension(e,"c9"),customDimension10:this._getCustomDimension(e,"c10")})}_getAdPosition(e){let t=this.core.get(F).getAdPositionKey(e.adUnit.network);return this.core.get(b).getAdServerTargeting(e,t)[0]}setQualityTargeting(e){this._set(e,{adPosition:this._getAdPosition(e),qtPageId:this.core.get(D).getVisitUuid(),qtSlotId:e.uuid})}setAdInstance(e,t){this._set(e,{advertiserId:t.advertiserId,orderId:t.campaignId,lineItemId:t.lineItemId,creativeId:t.creativeId,placementCode:e.adUnit.id,size:dr(t)})}setEngagement(e){this._set(e,{slotAdCount:this.core.get(w).getNonEmptyAdRenderedCount(e)})}_getLocatedElementType(e){let{sameOriginIframe:t,crossOriginIframe:r}=e;return t!=null?1:r!=null?2:0}setAdLocation(e,t){this._set(e,{locatedElementType:this._getLocatedElementType(t),adLocationMechanism:"manual"})}setDetectedAdFormat(e,t){t!=null&&this._set(e,L({},t))}setDebug(e){this._set(e,{isFalconTestEnabledDVP:1,isFalconTestEnabledEE:1,measurementInjectionStrategy:0})}};i(N,"MeasurementScript"),N=d([g],N);s();a();var we=class{constructor(){u(this,"iframeElements",new S.Map)}_applyDebugInfo(e,t){t.setAttribute("id",`gptm-${e.elementId}`),t.dataset.slotId=e.uuid,t.dataset.slotAdCount=`${this.core.get(w).getNonEmptyAdRenderedCount(e)}`}injectScriptElement(e,t){let r=this.core.get(T).document(),o=r.createElement("iframe");this.iframeElements.set(e,o),this._applyDebugInfo(e,o),o.style.display="none",o.addEventListener("load",()=>{var l;(l=o.contentDocument)==null||l.body.appendChild(t)}),r.body.appendChild(o)}removeScriptElement(e){var t;try{(t=this.iframeElements.get(e))==null||t.remove(),this.iframeElements.delete(e)}catch(r){}}};i(we,"MeasurementScriptInjection"),we=d([g],we);s();a();s();a();var kr={gpt:"google_ads_iframe_",ast:"utif_"},Ne=class{_getIframeDocument(e){try{return e.contentDocument}catch(t){return null}}_isIframeSameOrigin(e,t){if(t==null)return!1;if(e.src===""||e.src==="about:blank")return!0;let r=this.core.get(T).pageUrl();try{return new URL(e.src).origin===new URL(r).origin}catch(o){return!1}}_findIframe(e,t){if(kr[t]==null)return null;let o=e.querySelectorAll(`iframe[id^="${kr[t]}"]`);return o.length===1?o[0]:null}getAdContainer(e,t){if((t==null?void 0:t.type)!=="display")return{};let{elementId:r,adServer:o}=e,c=this.core.get(T).document().getElementById(r);if(c==null)return{};let h=this._findIframe(c,o);if(h==null)return{slotElement:c};let v=this._getIframeDocument(h);return this._isIframeSameOrigin(h,v)?{slotElement:c,sameOriginIframe:h,sameOriginIframeDocument:v}:{slotElement:c,crossOriginIframe:h}}};i(Ne,"AdLocator"),Ne=d([g],Ne);s();a();s();a();var ni=(n=>(n[n.DEFAULT=0]="DEFAULT",n[n.WEATHER_CHANNEL_LWIM=1]="WEATHER_CHANNEL_LWIM",n[n.CELTRA=2]="CELTRA",n[n.CLIPCENTRIC=4]="CLIPCENTRIC",n[n.WEATHER_CHANNEL_MWIM=8]="WEATHER_CHANNEL_MWIM",n))(ni||{}),ii=(n=>(n[n.NO_ERROR=0]="NO_ERROR",n[n.UNKNOWN_ERROR=1]="UNKNOWN_ERROR",n[n.TIMEOUT=2]="TIMEOUT",n[n.NO_AD_FOUND=4]="NO_AD_FOUND",n[n.MULTIPLE_ADS_LOCATED=8]="MULTIPLE_ADS_LOCATED",n[n.ABORTED=16]="ABORTED",n))(ii||{}),nt,Me=(nt=class extends Error{constructor(t,r,o){super(r,o);u(this,"errorCode");this.errorCode=t}},i(nt,"m"),nt),Fr=i(n=>n instanceof Me?n:n instanceof Error?new Me(1,n.message,{cause:n}):new Me(1,String(n)),"C"),oi=(n=>(n[n.NO_ERROR=0]="NO_ERROR",n[n.UNKNOWN_ERROR=1]="UNKNOWN_ERROR",n[n.MULTIPLE_AD_FORMATS_DETECTED=2]="MULTIPLE_AD_FORMATS_DETECTED",n[n.DOM_EXCEPTION=4]="DOM_EXCEPTION",n))(oi||{}),it,Ce=(it=class extends Error{constructor(t,r,o){super(r,o);u(this,"errorCode");this.errorCode=t}},i(it,"i"),it),$r=i(n=>n instanceof Ce?n:n instanceof Error?new Ce(1,n.message,{cause:n}):new Ce(1,String(n)),"p"),si=i(n=>{var e;return(e=n.ownerDocument)!=null?e:n},"U"),ai=i((n,e)=>si(e).evaluate(n,e,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),"X"),li=i(n=>(n==null?void 0:n.nodeType)===Node.ELEMENT_NODE?n:null,"v"),Rt=i((n,e)=>{let t=[],r=ai(n,e),o=r.iterateNext();for(;o!=null;){let l=li(o);l!=null&&t.push(l),o=r.iterateNext()}return t},"s"),Vr=i((n,e)=>{let t=Rt(n,e);return t.length>0?t:!1},"u"),di="celtra-ad-v",ui=`.//div[contains(concat(' ', @class), ' ${di}')]`,ci=/<div[^>]*class\s*=\s*(['"])(?:(?:(?!\1)\S)+\s+)*\s*celtra-ad-v/g,mi={name:"Celtra",id:2,detectDetached:i(n=>{let e=n.matchAll(ci);if(e.next().value===void 0)return!1;if(e.next().value!==void 0)throw new Ce(2);return!0},"detectDetached"),detect(n){let e=hi(n);return e===null?null:gi(e)}},gi=i(n=>e=>E(void 0,null,function*(){e.throwIfAborted();let t=(yield pi(n,e)).celtra.viewabilityObservee;if(t==null)throw new Me(4);return t}),"G"),pi=i((n,e)=>E(void 0,null,function*(){return yield new Promise((t,r)=>{var o;((o=n.celtra)==null?void 0:o.loaded)===!0?t(n):(n.addEventListener("celtraLoaded",()=>{t(n)},{once:!0,passive:!0,signal:e}),e.addEventListener("abort",()=>{r(new Me(16))},{once:!0,passive:!0}))})}),"K"),hi=i(n=>{let e=Rt(ui,n);if(e.length===0)return null;if(e.length!==1)throw new Ce(2,`Found ${e.length} Celtra tag elements`);return e[0]},"z"),jr=i(n=>{var t;let e=(t=n.ownerDocument.defaultView)==null?void 0:t.top;if(e==null)throw new Error("Window does not have a top property");return e},"D"),fi=1e3,Hr=i((r,o)=>E(void 0,[r,o],function*(n,{signal:e,retryInterval:t=fi}){let l=null;do{if(e.aborted)throw new Me(16);l=n(),l===null&&(yield vi(t))}while(l===null);return l}),"f"),vi=i(n=>E(void 0,null,function*(){return yield new Promise(e=>setTimeout(e,n))}),"Y"),Br="ccfid",Si=/<script[^>]*id\s*=\s*(['"])\s*ccfid(?:(?!\1).)*\1/g,Ei=`.//script[contains(@id,"${Br}")]`,Ti=i(n=>{if(n==null)throw new Error("Clipcentric script node is null");if(!n.hasAttribute("id"))throw new Error("Clipcentric script node does not have an id attribute");let e=n.getAttribute("id");if(e==null)throw new Error("Clipcentric script node id attribute is null");return e.replace(Br,"")},"J"),yi={name:"clipcentric",id:4,detectDetached:i(n=>{let e=n.matchAll(Si);if(e.next().value===void 0)return!1;if(e.next().value!==void 0)throw new Ce(2);return!0},"detectDetached"),detect(n){let e=Rt(Ei,n);if(e.length===0)return null;if(e.length>1)throw new Ce(2);let[t]=e,r=Ti(t);return Ai(r,n)}},Ai=i((n,e)=>t=>E(void 0,null,function*(){let r=`.//div[@data-cc-id="${n}"]`;return yield Hr(()=>_i(e,r),{signal:t})}),"Q"),_i=i((n,e)=>{let t=jr(n).document.documentElement,r=Vr(e,t);if(r!==!1&&r.length===1)return r[0];if(r!==!1&&r.length>1)throw new Me(8);return null},"Z"),Ri=(n=>(n.DETECTED="DETECTED",n.NOT_DETECTED="NOT_DETECTED",n.DETECTION_FAILED="DETECTION_FAILED",n))(Ri||{}),Gr=i((n,e)=>{let t=e.matchAll(n);if(t.next().value===void 0)return!1;if(t.next().value!==void 0)throw new Ce(2);return!0},"A"),Wr=i((n,e)=>{let t=Rt(n,e);if(t.length===0)return null;if(t.length>1)throw new Ce(2);return t[0]},"F"),Qr=i((n,e)=>t=>E(void 0,null,function*(){return yield Hr(()=>bi(n,e),{signal:t})}),"h"),bi=i((n,e)=>{let t=jr(n).document.documentElement,r=Vr(e,t);if(r!==!1&&r.length===1)return r[0];if(r!==!1&&r.length>1)throw new Me(8);return null},"tt"),wi='.//div[@id="labBG"]',Ci='.//div[@id="labBG"]',Di=/<div[^>]*id\s*=\s*(['"])\s*labBG\s*\1/g,Ii={name:"Weather Channel LWIM",id:1,detectDetached:Gr.bind(null,Di),detect(n){return Wr(wi,n)!=null?Qr(n,Ci):null}},Pi='.//body[@data-product="labAdMwim"]',xi='.//div[@id="labAdDiv"]',Oi=/<body[^>]*data-product\s*=\s*(['"])\s*labAdMwim\s*\1/g,Li={name:"Weather Channel MWIM",id:8,detectDetached:Gr.bind(null,Oi),detect(n){return Wr(Pi,n)!=null?Qr(n,xi):null}},Ni=i((n,e)=>()=>E(void 0,null,function*(){return yield new Promise(t=>{let r=new AbortController,{signal:o}=r,l=setTimeout(()=>{r.abort(),t({errorCode:2,diagnostics:qr(2,e)})},5e3);Promise.resolve(n(o)).then(c=>{clearTimeout(l),t({adNode:c,errorCode:0})}).catch(c=>{clearTimeout(l),t({errorCode:Fr(c).errorCode,diagnostics:qr(Fr(c).errorCode,e)})})})}),"O"),qr=i((n,e)=>`${n}|${e}:${n}`,"N"),Mi=i(n=>{try{return n&&(n.contentDocument||n.contentWindow&&n.contentWindow.document||frames&&frames[n.name]&&frames[n.name].document)}catch(e){return null}},"mt"),Ui=i((n,e)=>{try{if(Mi(n)===null)return!1;if(n.src===""||n.src==="about:blank")return!0;let t=new URL(n.src),r=new URL(e.location.href);return t.origin===r.origin}catch(t){return!1}},"M"),ki=i(n=>Array.from(n.querySelectorAll("iframe")).filter(e=>Ui(e,window)),"I"),Yr=i(n=>{let e=ki(n);if(e.length===0)return[n];let t=e.map(r=>r.contentDocument).filter(r=>r!==null).flatMap(r=>Yr(r.documentElement));return[n,...t]},"g"),Fi=i((n,e,t)=>{let r=e.map(c=>`${c.adFormat}:0`).join(","),o=t.map(c=>`${c.adFormat}:${c.reason.errorCode}`).join(","),l=e.length>0&&t.length>0?",":"";return`${n}|${r}${l}${o}`},"b"),qi=i((n,e)=>{let t=0;n.length>1&&(t|=2);for(let r of e)t|=r.reason.errorCode;return t},"W"),zr=i(n=>{let e=n.filter(l=>l.type==="DETECTED"),t=n.filter(l=>l.type==="DETECTION_FAILED"),r=qi(e,t),o=e.length===1;return r===0?{errorCode:r,detectedFormat:o?e[0]:null}:{errorCode:r,detectedFormat:null,diagnostics:Fi(r,e,t)}},"y"),$i=i((n,e)=>{let t=Vi(n,e);return zr(t)},"P"),Vi=i((n,e)=>Yr(n).flatMap(t=>e.map(r=>ji(r,t))),"st"),ji=i((n,e)=>{try{let t=n.detect(e);return t===null?{type:"NOT_DETECTED",adFormat:n.id}:{type:"DETECTED",adFormat:n.id,locate:Ni(t,n.id)}}catch(t){return{type:"DETECTION_FAILED",adFormat:n.id,reason:$r(t)}}},"lt"),Hi=i((n,e)=>{let t=e.map(r=>Bi(r,n));return zr(t)},"S"),Bi=i((n,e)=>{try{return n.detectDetached(e)?{type:"DETECTED",adFormat:n.id}:{type:"NOT_DETECTED",adFormat:n.id}}catch(t){return{type:"DETECTION_FAILED",adFormat:n.id,reason:$r(t)}}},"dt"),Kr=[mi,yi,Ii,Li],Xr=i(n=>Hi(n,Kr),"He"),Jr=i(n=>$i(n,Kr),"Ue");s();a();var pt=i(n=>{var e,t;return(t=(e=n.sameOriginIframe)!=null?e:n.crossOriginIframe)!=null?t:n.slotElement},"getDefaultElement");s();a();var Zr=i(n=>n.readyState==="interactive"||n.readyState==="complete","isDocumentReady"),en=i((n,e=2e3)=>E(void 0,null,function*(){let{crossOriginIframe:t,sameOriginIframe:r,sameOriginIframeDocument:o}=n;return t!=null?"cross-origin":r==null?"no-iframe":Zr(o)?"prev-ready":yield new Promise(l=>{let c=i(()=>{let v;try{v=Zr(o)}catch(y){h("error");return}v&&h("state-change")},"listener"),h=i(v=>{try{o.removeEventListener("readystatechange",c)}catch(y){}l(v)},"cleanupAndResolve");try{o.addEventListener("readystatechange",c)}catch(v){l("error")}setTimeout(()=>h("timeout"),e)})}),"waitForIFrameReadyState");var Ue=class{constructor(){u(this,"plugins",{});u(this,"_waitForIFrameReadyState",en)}locateAd(e,t){return E(this,null,function*(){var y,C;if(e.slotElement==null)return{adRef:pt(e),usedAdFormat:0,detectionDiagnostics:{errorCode:null,diagnostics:"No ad slot element"},locationDiagnostics:{errorCode:null}};let r=0,o,l=null;if(t.html!==void 0){if(l=Xr(t.html),l.errorCode!==0)return this.generateFallbackAdLocationResult(e,l);if(l.detectedFormat===null)return this.generateDefaultAdLocationResult(e,l);let he=Date.now();o=yield this._waitForIFrameReadyState(e),r=Date.now()-he}let c=Jr(e.slotElement);if(c.errorCode!==0)return this.generateFallbackAdLocationResult(e,c);if(c.detectedFormat===null)return l!==null&&this.core.get(x).fireEvent("detect-custom-ad-format",{cd120:o,cd130:this.getDetectedFormatId((y=l==null?void 0:l.detectedFormat)==null?void 0:y.adFormat),cd131:this.getDetectedFormatId(0),cm120:r},{sampleInterval:1,spoofWrapperId:!0}),this.generateDefaultAdLocationResult(e,c);let h=c.detectedFormat,v=yield h.locate();return this.isAdSuccess(v)?(this.core.get(x).fireEvent("detect-custom-ad-format",{cd120:o,cd130:this.getDetectedFormatId((C=l==null?void 0:l.detectedFormat)==null?void 0:C.adFormat),cd131:this.getDetectedFormatId(c.detectedFormat.adFormat),cm120:r},{sampleInterval:100,spoofWrapperId:!0}),{adRef:v.adNode,usedAdFormat:h.adFormat,detectionDiagnostics:{errorCode:c.errorCode},locationDiagnostics:{errorCode:v.errorCode}}):this.generateFallbackAdLocationResult(e,c,v)})}isAdSuccess(e){return e.errorCode===0}getDetectedFormatId(e){return e===void 0?"0":`${e}`}generateDefaultAdLocationResult(e,t){var r;return{adRef:pt(e),usedAdFormat:0,detectionDiagnostics:{errorCode:t.errorCode,diagnostics:(r=t.diagnostics)!=null?r:""},locationDiagnostics:{errorCode:null}}}generateFallbackAdLocationResult(e,t,r){var o;return Ve(L({},this.generateDefaultAdLocationResult(e,t)),{locationDiagnostics:r!==void 0?{errorCode:(o=r==null?void 0:r.errorCode)!=null?o:0,diagnostics:r==null?void 0:r.diagnostics}:{errorCode:null}})}};i(Ue,"AdLocation"),Ue=d([g],Ue);var Gi=5e3,$=class{constructor(){u(this,"plugins",{adCandidateChanged:i((e,t)=>[],"adCandidateChanged"),adCandidateCommitted:i((e,t)=>[],"adCandidateCommitted"),adCandidatePubliclyCommitted:i(e=>[],"adCandidatePubliclyCommitted")});u(this,"adCandidate",new S.Link)}_changeAdCandidate(e,t,r){let o=this.adCandidate.get(e),l=o.peek();return(l==null?void 0:l.element)!==t&&(l==null||l.destroy(),l=S.Create({parent:e,element:t}),o.add(l),this.plugins.adCandidateChanged(l,r)),l}_schedulePublicCommit(e){let t=this.core.get(T).time(),r=Gi-(t-e.parent.timestamp);r<=0?this.plugins.adCandidatePubliclyCommitted(e):this.core.get(j).setTimeout(e,()=>this.plugins.adCandidatePubliclyCommitted(e),r)}_onAdRendered(e,t){return E(this,null,function*(){var r;try{if((t==null?void 0:t.type)!=="display")return;let o=this.core.get(Ne).getAdContainer(e,t);if(o.slotElement==null)return;let l=pt(o);this._changeAdCandidate(t,l,{usedAdFormat:0,adContainer:o});let c=yield this.core.get(Ue).locateAd(o,t);if(t.destroyed)return;let h={usedAdFormat:c.usedAdFormat,adContainer:o,adDetectionDiagnostics:c.detectionDiagnostics.diagnostics,adLocatingDiagnostics:c.locationDiagnostics.diagnostics},v=this._changeAdCandidate(t,(r=c.adRef)!=null?r:l,h);this.plugins.adCandidateCommitted(v,h),this._schedulePublicCommit(v)}catch(o){}})}};i($,"AutoAdLocation"),d([f(w,"adRendered")],$.prototype,"_onAdRendered",1),$=d([g],$);var ue=class extends P{_isEligibleForMeasurement(e){return e.adServer==="custom"||e.adServer==="ast"||this.core.get(F).isAdServerConfigured(e.adUnit.network)}_isReadyForMeasurement(e){return this._isEligibleForMeasurement(e)&&(e.adServer==="custom"||this.core.get(H).isTargetingReliable(e))}_disableCreativeWrapperMeasurement(e){return this._isEligibleForMeasurement(e)&&!this.core.get(Le).shouldPerformIntentionalDuplicateMeasurement(e)}_onSlotDiscovered(e){this._isEligibleForMeasurement(e)&&(this.core.get(N).setIdentifiers(e),this.core.get(N).setConstants(e),this.core.get(N).setAdUnit(e))}_onAdRequested(e){this._isEligibleForMeasurement(e)&&(this.core.get(N).setCustomDimensions(e),this.core.get(N).setQualityTargeting(e))}_onAdCandidateCommitted({parent:e,element:t},r){let o=e.parent;if((e==null?void 0:e.type)!=="display"||!this._isReadyForMeasurement(o))return;this.core.get(N).setAdInstance(o,e),this.core.get(N).setEngagement(o),this.core.get(N).setAdLocation(o,r.adContainer),this.core.get(N).setDebug(o),this.core.get(N).setGdpr(o),this.core.get(N).setDetectedAdFormat(o,r);let l=this.core.get(N).createScriptElement(o,t);this.core.get(le).increment(),this.core.get(we).injectScriptElement(o,l)}_onAdRemoved(e){this.core.get(le).decrement(),this.core.get(we).removeScriptElement(e)}};i(ue,"GptMeasurement"),d([f(H,"disableCreativeWrapperMeasurement")],ue.prototype,"_disableCreativeWrapperMeasurement",1),d([f(A,"slotDiscovered")],ue.prototype,"_onSlotDiscovered",1),d([f(w,"adRequestedOrInferred")],ue.prototype,"_onAdRequested",1),d([f($,"adCandidateCommitted")],ue.prototype,"_onAdCandidateCommitted",1),d([f(w,"adRemoved")],ue.prototype,"_onAdRemoved",1),ue=d([g,O(V),O(de)],ue);s();a();s();a();s();a();s();a();s();a();var tn=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1];var B=class{constructor(){u(this,"plugins",{adVisibilityChanged:i((e,t)=>[],"adVisibilityChanged")});u(this,"lastEntry",new S.Map)}_onAdCandidateCommitted(e){let t=this.core.get(T).window();t.IntersectionObserver!=null&&this.core.get(z).observe(e,new t.IntersectionObserver(r=>this._onIntersectionObserverEvent(e,r),{threshold:tn}),e.element)}get(e){return this.lastEntry.get(e)}getMonitoredCandidates(){return[...this.lastEntry.keys()]}_onIntersectionObserverEvent(e,t){for(let r of t)this.lastEntry.set(e,r),this.plugins.adVisibilityChanged(e,r)}};i(B,"AdVisibility"),d([f($,"adCandidateCommitted")],B.prototype,"_onAdCandidateCommitted",1),B=d([g],B);s();a();s();a();var ce=class{constructor(){u(this,"listeners",{slotVisibilityChanged:new Set,impressionViewable:new Set})}_addEventListener(e,t){this.listeners[e]!=null&&this.listeners[e].add(t)}_removeEventListener(e,t){this.listeners[e]!=null&&this.listeners[e].delete(t)}fireEvent(e,t){for(let r of this.listeners[e])try{r(t)}catch(o){}}};i(ce,"OutboundEvents"),d([J("addEventListener")],ce.prototype,"_addEventListener",1),d([J("removeEventListener")],ce.prototype,"_removeEventListener",1),ce=d([g],ce);var me=class{constructor(){u(this,"committed",new S.Set);u(this,"buffer",new S.Map)}_onAdCandidatePubliclyCommitted(e){var r;this.committed.add(e);let t=(r=this.buffer.get(e))!=null?r:[];for(let{type:o,payload:l}of t)this.core.get(ce).fireEvent(o,l);this.buffer.delete(e)}fireEvent(e,t,r){this.committed.has(e)?this.core.get(ce).fireEvent(t,r):this.buffer.summon(e,[]).push({type:t,payload:r})}};i(me,"BufferedEvents"),d([f($,"adCandidatePubliclyCommitted")],me.prototype,"_onAdCandidatePubliclyCommitted",1),me=d([g],me);var Wi=1e3,Qi=.5,Yi=.3,zi=242e3,G=class{constructor(){u(this,"plugins",{impressionViewable:i(e=>[],"impressionViewable")});u(this,"viewableTimer",new S.Link);u(this,"viewable",new S.Set)}_onAdVisibilityChanged(e,t){this._startOrStopTimer(e,t)}_onPageHide(){for(let e of this.viewableTimer.keys())this._clearTimer(e)}_onPageVisible(){this.core.get(B).getMonitoredCandidates().forEach(e=>{let t=this.core.get(B).get(e);t!=null&&this._startOrStopTimer(e,t)})}_startOrStopTimer(e,t){if(this.viewable.has(e)||this.core.get(M).isHidden())return;let r=this._isLargeAd(t.boundingClientRect)?Yi:Qi;t.intersectionRatio>=r?this._startTimer(e):this._clearTimer(e)}_startTimer(e){this.viewableTimer.get(e).conjure(()=>this.core.get(j).setTimeout(e,()=>this._onTimeout(e),Wi))}_onTimeout(e){let t=e.parent.parent;this.viewable.add(e),this.plugins.impressionViewable(e),this.core.get(me).fireEvent(e,"impressionViewable",{slot:{elementId:t.elementId,source:t.adServer},timestamp:Date.now()})}_clearTimer(e){var t;(t=this.viewableTimer.get(e).peek())==null||t.destroy()}isMobile(){var o;let{navigator:e}=this.core.get(T).window(),t=(o=e.userAgentData)==null?void 0:o.mobile;if(typeof t=="boolean")return t;let{userAgent:r}=e;return r.includes("Mobi")||r.includes("Tablet")}_isLargeAd(e){return this.isMobile()?!1:e.width*e.height>=zi}};i(G,"ImpressionViewable"),d([f(B,"adVisibilityChanged")],G.prototype,"_onAdVisibilityChanged",1),d([f(M,"pageHide")],G.prototype,"_onPageHide",1),d([f(M,"pageVisible")],G.prototype,"_onPageVisible",1),G=d([g],G);s();a();var on=ir(Gt());var K=class{constructor(){u(this,"fireEvent",new S.Map);u(this,"plugins",{slotVisibilityChanged:i((e,t)=>[],"slotVisibilityChanged")})}_onAdVisibilityChanged(e,t){let r=e.parent.parent;this.fireEvent.conjure(e,()=>(0,on.default)(l=>{this.plugins.slotVisibilityChanged(e,l),this.core.get(me).fireEvent(e,"slotVisibilityChanged",{slot:{elementId:r.elementId,source:r.adServer},visibility:{percentage:l*100},timestamp:Date.now()})},200))(t.intersectionRatio)}_onPageHide(){this.fireEvent.forEach(e=>e(0))}_onPageVisible(){this.fireEvent.forEach((e,t)=>{var o;let r=(o=this.core.get(B).get(t))==null?void 0:o.intersectionRatio;r!=null&&e(r)})}};i(K,"SlotVisibilityChanged"),d([f(B,"adVisibilityChanged")],K.prototype,"_onAdVisibilityChanged",1),d([f(M,"pageHide")],K.prototype,"_onPageHide",1),d([f(M,"pageVisible")],K.prototype,"_onPageVisible",1),K=d([g],K);s();a();var Xi=1e-4,Ji=10,Zi=9.5*60*1e3,eo=10*60*1e3,to=5e3;var X=class{constructor(){u(this,"enabled",!1);u(this,"lastTimestamp",new S.Map);u(this,"lastBucketIndex",new S.Map);u(this,"buckets",new S.Map);u(this,"viewableTimestamp",new S.Map);u(this,"trackerCount",new S.Map);u(this,"lastTrackerSendTime",new S.Map);u(this,"visitId",new S.Map)}_initialize(){let{Math:e}=this.core.get(T).window();this.enabled=e.random()<Xi}_onImpressionViewable(e){if(!this.enabled)return;let{Date:t}=this.core.get(T).window();this.viewableTimestamp.set(e,t.now())}_onVisibilityChanged(e,t){this.enabled&&this._updateBuckets(e,t)}_onAdCandidateCommitted(e){this.enabled&&(this.visitId.set(e,this.core.get(D).getVisitUuid()),this.core.get(j).setTimeout(e,()=>this._sendTracker(e),Zi,!0))}_onPageHide(){if(this.enabled)for(let e of this.visitId.keys())this._sendTracker(e)}_sendTracker(e){var v;let t=this.core.get(T).time(),r=e.parent.parent,o=this.lastTrackerSendTime.get(e),l=(v=this.trackerCount.get(e))!=null?v:0;if(l>=Ji||t-e.parent.timestamp>eo||o!=null&&t-o<to)return;let c={cd110:this.visitId.get(e),cd111:r.uuid,cm106:this.core.get(w).getNonEmptyAdRenderedCount(r),cm107:l,cm108:this.viewableTimestamp.get(e),cm109:this.core.get(G).isMobile()?1:0},h=this._updateBuckets(e);for(let y=0;y<h.length;y++)c[`cm${110+y}`]=h[y];this.core.get(x).fireEvent("visibility-api",c,{spoofWrapperId:!0}),this.trackerCount.set(e,l+1),this.lastTrackerSendTime.set(e,t)}_getBucketIndex(e){return e===0?0:Math.floor(Math.min(e,1)*10)+1}_updateBuckets(e,t){let r=this.core.get(T).time(),o=this.buckets.conjure(e,()=>[0,0,0,0,0,0,0,0,0,0,0,0]),l=this.lastTimestamp.summon(e,r),c=this.lastBucketIndex.summon(e,0);return this.lastTimestamp.set(e,r),t!=null&&this.lastBucketIndex.set(e,this._getBucketIndex(t)),o[c]+=r-l,o}};i(X,"VisibilityValidation"),d([R],X.prototype,"_initialize",1),d([f(G,"impressionViewable")],X.prototype,"_onImpressionViewable",1),d([f(K,"slotVisibilityChanged")],X.prototype,"_onVisibilityChanged",1),d([f($,"adCandidateCommitted")],X.prototype,"_onAdCandidateCommitted",1),d([f(M,"pageHideThrottled")],X.prototype,"_onPageHide",1),X=d([g],X);var ot=class extends P{};i(ot,"Visibility"),ot=d([g,O(K),O(G),O(X)],ot);s();a();s();a();s();a();var sn=i((n,e=!0)=>{let t=document.createElement("script");return t.setAttribute("src",n),e&&t.setAttribute("async",""),t},"createScriptElement");s();a();s();a();var ke=i(()=>{var n,e,t;return Math.floor((t=(e=(n=window.performance)==null?void 0:n.now)==null?void 0:e.call(n))!=null?t:Date.now())},"perfNowOrDateNow");s();a();var Wt=class Wt{constructor(){u(this,"_firstQueuedAdRequest",1/0);u(this,"_lastQueuedAdRequest",-1/0);u(this,"_firstReleasedAdRequest",1/0);u(this,"_lastReleasedAdRequest",-1/0);u(this,"_lastReleasedAdRequestTime",null);u(this,"_hasBeenSuccessful",!1)}setAdRequestQueued(e){this._firstQueuedAdRequest=Math.min(this._firstQueuedAdRequest,e),this._lastQueuedAdRequest=Math.max(this._lastQueuedAdRequest,e)}setAdRequestReleased(e){this._firstReleasedAdRequest=Math.min(this._firstReleasedAdRequest,e),this._lastReleasedAdRequest=Math.max(this._lastReleasedAdRequest,e),this._lastReleasedAdRequestTime=ke()}getLastQueuedAdRequest(){return Number.isFinite(this._lastQueuedAdRequest)?this._lastQueuedAdRequest:null}getLastReleasedAdRequest(){return Number.isFinite(this._lastReleasedAdRequest)?this._lastReleasedAdRequest:null}getLastReleasedAdRequestTime(){return this._lastReleasedAdRequestTime}getLastSuccessfulAdRequest(){let e=Math.max(this._firstQueuedAdRequest,this._firstReleasedAdRequest),t=Math.min(this._lastQueuedAdRequest,this._lastReleasedAdRequest);return t<e?null:t}getPreviouslySuccessful(){return this._hasBeenSuccessful}markAdServerAdRequest(){this.getLastSuccessfulAdRequest()!=null&&(this._hasBeenSuccessful=!0),this._firstQueuedAdRequest=1/0,this._lastQueuedAdRequest=-1/0,this._firstReleasedAdRequest=1/0,this._lastReleasedAdRequest=-1/0,this._lastReleasedAdRequestTime=null}};i(Wt,"SlotAdRequestTracker");var bt=Wt;s();a();var wt=(c=>(c.UNKNOWN="UNKNOWN",c.SEEN="SEEN",c.NOT_READY="NOT_READY",c.POSSIBLE_TIMEOUT="POSSIBLE_TIMEOUT",c.PREV_READY="PREV_READY",c.READY="READY",c))(wt||{});var Qt="dv_upt_slot_ready",ro=["https://securepubads.g.doubleclick.net/gampad/ads?","https://pagead2.googlesyndication.com/gampad/ads?"],no=750,q=class{constructor(){u(this,"plugins",{onSlotRequested:i(()=>[],"onSlotRequested"),onSlotRequestValidated:i(()=>[],"onSlotRequestValidated")});u(this,"validateAdRequests",!1);u(this,"lastAdRequestQueued",null);u(this,"lastAdRequestReleased",null);u(this,"state",{adRequestTracker:new S.Map,triggered:new S.Map})}_getSlotAdRequestTracker(e){return this.state.adRequestTracker.conjure(e,()=>new bt)}_onAdRequestQueued({index:e}){this.lastAdRequestQueued=e;for(let t of this.core.get(A).getSlots())this._getSlotAdRequestTracker(t).setAdRequestQueued(e),this.state.triggered.set(t,!1)}_onAdRequestBeforeRelease({index:e}){let t=this.core.get(b);this.lastAdRequestReleased=e;for(let r of this.core.get(A).getSlots())this._getSlotAdRequestTracker(r).setAdRequestReleased(e),this.validateAdRequests&&t.setSlotTargeting(r,{[Qt]:["1"]})}_onSlotDiscovered(e,t){t===0&&this.lastAdRequestQueued!=null&&this._getSlotAdRequestTracker(e).setAdRequestQueued(this.lastAdRequestQueued)}_determineReadyState(e){let t=this._getSlotAdRequestTracker(e),r=t.getLastQueuedAdRequest(),o=t.getLastSuccessfulAdRequest(),l=t.getPreviouslySuccessful();return o!=null?"READY":l?"PREV_READY":r!=null?"NOT_READY":Date.now()-e.creationTime>no?"SEEN":"UNKNOWN"}getSlotReadyStateOnAdServerAdRequest(e){let t=this._determineReadyState(e);if(t==="READY"){if(this.state.triggered.get(e)===!0)return{readyState:"PREV_READY"};this.state.triggered.set(e,!0);let r=this._getSlotAdRequestTracker(e).getLastReleasedAdRequestTime();return{readyState:t,readyFor:ke()-r}}return{readyState:t}}_onSlotRequested(e){let{readyState:t,readyFor:r}=this.getSlotReadyStateOnAdServerAdRequest(e);this._getSlotAdRequestTracker(e).markAdServerAdRequest(),this.validateAdRequests&&this.core.get(b).setSlotTargeting(e,{[Qt]:["0"]}),this.plugins.onSlotRequested(e,t,r)}enableAdRequestValidation(){if(!this.validateAdRequests)try{let e=this._processResourceRequest.bind(this);new PerformanceObserver(r=>r.getEntries().forEach(e)).observe({type:"resource"}),this.validateAdRequests=!0}catch(e){}}_processResourceRequest(e){var t,r,o;try{if(ro.every(h=>!e.name.startsWith(h)))return;let c=(r=(t=new URL(e.name).searchParams.get("prev_scp"))==null?void 0:t.split("|"))!=null?r:[];for(let h of c){let y=((o=new URLSearchParams(h).get(Qt))==null?void 0:o[0])==="1";this.plugins.onSlotRequestValidated(y)}}catch(l){}}};i(q,"SlotReadinessTracker"),d([f(_,"adRequestQueued")],q.prototype,"_onAdRequestQueued",1),d([f(_,"adRequestBeforeRelease"),f(_,"adRequestTimedOut")],q.prototype,"_onAdRequestBeforeRelease",1),d([f(A,"slotDiscovered")],q.prototype,"_onSlotDiscovered",1),d([f(w,"adRequested")],q.prototype,"_onSlotRequested",1),q=d([g],q);var Yt="__dvtag_debug_mode",an="1",ne=class{constructor(){u(this,"enabled",!1);u(this,"debugScriptLoaded",i(e=>{},"debugScriptLoaded"));u(this,"debugScriptLoadedPromise",new Promise(e=>{this.debugScriptLoaded=e}))}_initialize(){try{this.enabled=window===window.top&&this.core.window.sessionStorage.getItem(Yt)===an}catch(e){}this.enabled&&(this.core.get(_).delayAdRequests(this.debugScriptLoadedPromise),this._loadDebugScript())}_toggleDebugMode(){return E(this,null,function*(){this.enabled?this.core.window.sessionStorage.removeItem(Yt):this.core.window.sessionStorage.setItem(Yt,an),this.core.window.location.reload()})}_onDebugScriptLoaded(){this.debugScriptLoaded(void 0)}_loadDebugScript(){return E(this,null,function*(){let{ctx:e,cmp:t}=this.core.get(D).getTagInfo(),{document:r}=this.core.window,o=sn(`https://pub.doubleverify.com/dvtag/${e}/${t}/debug.js`,!0);r.readyState==="loading"&&(yield new Promise(l=>r.addEventListener("DOMContentLoaded",()=>l(void 0)))),r.head.appendChild(o)})}_onAdRequestEvent(e){var t;(t=window.dvtagDebug)==null||t.adRequestEvent(e)}};i(ne,"DebugScriptLoader"),d([R],ne.prototype,"_initialize",1),d([J("toggleDebugMode")],ne.prototype,"_toggleDebugMode",1),d([J("_debugScriptLoaded")],ne.prototype,"_onDebugScriptLoaded",1),d([f(_,"adRequestQueued"),f(_,"adRequestBeforeRelease"),f(_,"adRequestTimedOut")],ne.prototype,"_onAdRequestEvent",1),ne=d([O(q),g],ne);s();a();var zt="qt_loaded",ln="pts_pid";s();a();var Kt=i(n=>[...new Set(n.filter(fr).map(e=>e.toLowerCase()))],"getGreenlightSignal");var Fe=class extends P{_autoInsertGlobalTargeting(e){this.core.get(b).setGlobalTargeting({[zt]:Kt(Object.keys(e))},!0)}_autoInsertSlotTargeting(e,t){this.core.get(b).setSlotTargeting(e,{[zt]:Kt(Object.keys(t))},!0)}};i(Fe,"SignalsAutoInsertion"),d([f(I,"userTargetingUpdated"),f(I,"pageTargetingUpdated")],Fe.prototype,"_autoInsertGlobalTargeting",1),d([f(I,"slotTargetingUpdated")],Fe.prototype,"_autoInsertSlotTargeting",1),Fe=d([g,O(V),O(ne)],Fe);s();a();s();a();var Te=class{constructor(){u(this,"renderCount",0)}_onAdRendered(){this.renderCount+=1}reset(){this.renderCount=0}getRenderCount(){return this.renderCount}};i(Te,"AdRenderedCounter"),d([f(w,"adRendered")],Te.prototype,"_onAdRendered",1),Te=d([g],Te);s();a();var un=ir(Gt());s();a();var Xt=class Xt{constructor(e){u(this,"arr");u(this,"start");u(this,"size");this.arr=new Array(e),this.start=0,this.size=0}push(e){this.size===this.arr.length?this.start=this.nthIndex(1):this.size+=1,this.arr[this.nthIndex(this.size-1)]=e}nthIndex(e){return(this.start+e)%this.arr.length}last(){return this.size===0?null:this.arr[this.nthIndex(this.size-1)]}findNewest(e){for(let t=this.size-1;t>=0;t--){let r=this.arr[this.nthIndex(t)];if(e(r))return r}return null}};i(Xt,"RingBuffer");var Ct=Xt;var dn=10,io=100,oo=3e3,so=2e3,ge=class{constructor(){u(this,"measurements",new Ct(20));u(this,"lastNavigationTime");u(this,"viewportWidths",new Set);u(this,"documentHeights",new Set)}_initialize(){return E(this,null,function*(){let{document:e}=this.core.window;e.readyState==="loading"&&(yield new Promise(t=>e.addEventListener("DOMContentLoaded",()=>t(void 0)))),e.addEventListener("scroll",(0,un.default)(()=>{this._updateScrollMetrics()},200)),this._updateScrollMetrics()})}_getScrollData(){let e=this.core.get(T).document().compatMode==="BackCompat",{scrollHeight:t,clientHeight:r,clientWidth:o}=this.core.window.document[e?"body":"documentElement"];return{scrollY:Math.floor(this.core.window.scrollY),viewportHeight:r,viewportWidth:o,documentHeight:t}}_getScrollPercentage({scrollY:e,documentHeight:t,viewportHeight:r}){return t===r?0:e/(t-r)}_updateScrollMetrics(e=!1){var v;let t=this._getScrollData(),r=this.lastNavigationTime!=null&&Date.now()-this.lastNavigationTime<oo;this.viewportWidths.size<dn&&this.viewportWidths.add(t.viewportWidth),this.documentHeights.size<dn&&this.documentHeights.add(t.documentHeight);let{deepestScrollData:o,deepestScrollWithResetData:l,maxScrollData:c,hasScrolledToTop:h}=(v=this.measurements.last())!=null?v:{};h=!e&&h===!0||t.scrollY<t.viewportHeight,(c==null||r||t.scrollY>=c.scrollY)&&(c=t),(o==null||r||this._getScrollPercentage(t)>=this._getScrollPercentage(o))&&(o=t),(l==null||r||this._getScrollPercentage(t)>=this._getScrollPercentage(l)||t.documentHeight-l.documentHeight>io)&&(l=t),this.measurements.push({time:Date.now(),hasScrolledToTop:h,maxScrollData:c,deepestScrollData:o,deepestScrollWithResetData:l})}getScrollMeasurements(e){var r;let t;return e==null?t=this.measurements.last():t=(r=this.measurements.findNewest(o=>o.time<Date.now()-e))!=null?r:this.measurements.last(),t==null?null:Ve(L({},t),{viewportWidths:this.viewportWidths,documentHeights:this.documentHeights})}reset(){this.lastNavigationTime=Date.now(),this._updateScrollMetrics(!0),setTimeout(()=>this._updateScrollMetrics(),so)}};i(ge,"ScrollMetrics"),d([R],ge.prototype,"_initialize",1),ge=d([g],ge);s();a();s();a();var cn=i((n,{deepestScrollData:e,deepestScrollWithResetData:t,maxScrollData:r,viewportWidths:o,documentHeights:l},{inFocusMs:c,visibleMs:h,visibleAndInFocusMs:v},y,C,he)=>{var U;let fe=(U=performance==null?void 0:performance.now)==null?void 0:U.call(performance);return{cd110:n.visit.normalizedUrl,cd111:[...o].join(","),cd112:[...l].join(","),cd113:n.visit.uuid,cm106:c,cm107:h,cm108:C,cm109:he,cm110:n.visitIndex,cm111:n.infiniteScrollDetected?1:0,cm116:fe!=null?fe/1e3:void 0,cm117:v,cm118:n.visitStart/1e3,cm119:Date.now()/1e3,cm120:n.trackerCount,cm121:e.scrollY,cm122:e.viewportHeight,cm123:e.viewportWidth,cm124:e.documentHeight,cm125:t.scrollY,cm126:t.viewportHeight,cm127:t.viewportWidth,cm128:t.documentHeight,cm129:r.scrollY,cm130:r.viewportHeight,cm131:r.viewportWidth,cm132:r.documentHeight,cm133:y}},"createPlemTracker");s();a();s();a();var Jt=class Jt{constructor(){u(this,"runningSince",null);u(this,"totalTimeMs",0)}getTimestamp(){return Date.now()}getCurrentRunningTime(){return this.runningSince!=null?this.getTimestamp()-this.runningSince:0}start(){this.runningSince=this.getTimestamp()}stop(){this.totalTimeMs+=this.getCurrentRunningTime(),this.runningSince=null}add(e){this.totalTimeMs+=e}get(){return this.totalTimeMs+this.getCurrentRunningTime()}reset(e=!1){this.runningSince=this.runningSince!=null&&e?Date.now():null,this.totalTimeMs=0}};i(Jt,"Timer");var st=Jt;var ye=class{constructor(){u(this,"inFocusTimer",new st);u(this,"visibleTimer",new st);u(this,"visibleInFocusTimer",new st)}_initialize(){return E(this,null,function*(){var r,o,l;let e=this.core.window,t=(l=(o=(r=e.performance)==null?void 0:r.now)==null?void 0:o.call(r))!=null?l:0;e.addEventListener("focus",()=>{this.inFocusTimer.start(),e.document.hidden||this.visibleInFocusTimer.start()}),e.addEventListener("blur",()=>{this.inFocusTimer.stop(),this.visibleInFocusTimer.stop()}),e.document.addEventListener("visibilitychange",()=>{e.document.hidden?(this.visibleTimer.stop(),this.visibleInFocusTimer.stop()):(this.visibleTimer.start(),e.document.hasFocus()&&this.visibleInFocusTimer.start())}),e.document.hasFocus()&&(this.inFocusTimer.add(t),this.inFocusTimer.start(),e.document.hidden||(this.visibleInFocusTimer.add(t),this.visibleInFocusTimer.start())),e.document.hidden||(this.visibleTimer.add(t),this.visibleTimer.start())})}getVisibilityMeasurements(){return{inFocusMs:this.inFocusTimer.get(),visibleMs:this.visibleTimer.get(),visibleAndInFocusMs:this.visibleInFocusTimer.get()}}reset(){this.visibleTimer.reset(!0),this.inFocusTimer.reset(!0),this.visibleInFocusTimer.reset(!0)}};i(ye,"VisibilityMetrics"),d([R],ye.prototype,"_initialize",1),ye=d([g],ye);var ao=6e4,lo=61*60*1e3,uo=59.5*60*1e3,co=6e4,mo=2500,go=5e3,po=1500,qe=class{constructor(){u(this,"currVisit");u(this,"pendingTracker");u(this,"tagLoadTime");u(this,"firstContentfulPaint")}_initialize(){return E(this,null,function*(){var t,r;let e=this.core.window;this.tagLoadTime=(r=(t=this.core.window.performance)==null?void 0:t.now)==null?void 0:r.call(t),this._updateFirstContentfulPaint(),e.document.addEventListener("visibilitychange",()=>{e.document.hidden&&this._flushTrackers()}),setInterval(()=>{this.currVisit!=null&&Date.now()>this.currVisit.visitStart+uo&&(e.document.hidden||this._fireTracker())},co)})}_updateFirstContentfulPaint(){try{let e=new this.core.window.PerformanceObserver(t=>{t.getEntries().forEach(r=>{r.name==="first-contentful-paint"&&(this.firstContentfulPaint=r.startTime,e.disconnect())})});e.observe({type:"paint",buffered:!0})}catch(e){}}_fireTracker({visit:e,scroll:t,visibility:r,adRenderCount:o}=this._getTrackerData(),l=!1){t!=null&&(!l&&(Date.now()>e.visitStart+lo||e.lastTrackerTime!=null&&e.lastTrackerTime>Date.now()-ao)||(this.core.get(x).fireEvent("content-metrics",cn(e,t,r,o,this.tagLoadTime,this.firstContentfulPaint),{sampleInterval:1,spoofWrapperId:!0}),e.lastTrackerTime=Date.now(),e.trackerCount+=1))}_getTrackerData(){if(this.currVisit==null)throw new Error("No data!");return{visit:this.currVisit,scroll:this.core.get(ge).getScrollMeasurements(po),visibility:this.core.get(ye).getVisibilityMeasurements(),adRenderCount:this.core.get(Te).getRenderCount()}}_checkForInfiniteScroll(){let e=this.core.get(ge).getScrollMeasurements();e!=null&&!e.hasScrolledToTop&&(this.pendingTracker!=null&&(this.pendingTracker.data.visit.infiniteScrollDetected=!0),this.currVisit!=null&&(this.currVisit.infiniteScrollDetected=!0))}_scheduleDelayedTracker(){this._flushPendingTracker(),this.pendingTracker={data:this._getTrackerData(),timer:setTimeout(()=>{this._flushPendingTracker()},go)}}_flushPendingTracker(){this.pendingTracker!=null&&(this._checkForInfiniteScroll(),this._fireTracker(this.pendingTracker.data,!0),clearTimeout(this.pendingTracker.timer),this.pendingTracker=void 0)}_flushTrackers(){this._flushPendingTracker(),this._fireTracker()}_onNewVisit(e){var r,o;let t=this.currVisit==null;this.currVisit!=null&&(Date.now()-this.currVisit.visitStart>mo&&this._scheduleDelayedTracker(),this.core.get(ye).reset(),this.core.get(ge).reset(),this.core.get(Te).reset()),this.currVisit={visit:e,visitStart:Date.now()-(t&&this.tagLoadTime!=null?this.tagLoadTime:0),visitIndex:((o=(r=this.currVisit)==null?void 0:r.visitIndex)!=null?o:-1)+1,trackerCount:0}}};i(qe,"PLEMetrics"),d([R],qe.prototype,"_initialize",1),d([f(D,"newVisit")],qe.prototype,"_onNewVisit",1),qe=d([g],qe);s();a();s();a();var ho=ln,pe=class{constructor(){u(this,"restoreCount",0)}getRestoreCount(){return this.restoreCount}_restoreTargeting(){let e=this.core.get(b);for(let t of this.core.get(A).getSlots())e.getAdServerTargeting(t,ho).length===0&&(e.setAdServerTargeting(t),this.restoreCount+=1)}};i(pe,"TargetingRestorer"),d([f(_,"adRequestQueued")],pe.prototype,"_restoreTargeting",1),pe=d([g],pe);s();a();var Zt=class Zt{constructor(){u(this,"total",0);u(this,"dataPoints",0)}push(e){return this.total+=e,this.dataPoints+=1,this}get(){return this.total/this.dataPoints}getRounded(){return Math.round(this.get())}};i(Zt,"Average");var ht=Zt;var fo="implcheck",vo=1e-4,So=5e3,Eo=5,ie=class{constructor(){u(this,"enabled",!1);u(this,"totalInternalAdRequestQueuedCount",0);u(this,"totalAdRequestsCompletedCount",0);u(this,"totalSlotsRequestedCount",0);u(this,"totalSlotsRequestedOkCount",0);u(this,"totalTimeoutCount",0);u(this,"trackersSent",0);u(this,"totalValidatedAdServerRequests",{ok:0,notOk:0});u(this,"lastOnDvtagReadyCall",NaN);u(this,"slotReqAvgTimeSinceCall",new ht);u(this,"slotReqAvgTimeSinceDone",new ht);u(this,"batch",null)}isDebugForceEnabled(){return!1}_initialize(){this.enabled=this.core.get(ie).isDebugForceEnabled()||Math.random()<vo,this.enabled&&this.core.get(q).enableAdRequestValidation()}_onAdRequestQueued(e){this.enabled&&(this.lastOnDvtagReadyCall=ke(),e.internal&&(this.totalInternalAdRequestQueuedCount+=1))}_onAdRequestCompleted(e){this.enabled&&(this.totalAdRequestsCompletedCount+=1,(e.status==="tag-timeout"||e.status==="queue-timeout")&&(this.totalTimeoutCount+=1))}_onSlotRequested(e,t,r){if(!this.enabled)return;let o=this._getOrStartBatch();this.totalSlotsRequestedCount+=1,t==="READY"&&(this.totalSlotsRequestedOkCount+=1),o.slots[t].push(e.elementId),r!=null&&(this.slotReqAvgTimeSinceDone.push(r),this.slotReqAvgTimeSinceCall.push(ke()-this.lastOnDvtagReadyCall));let l=this._validateAdServerTargeting(e);l===1?o.targeting.extendedCount+=1:l===0&&(o.targeting.reducedCount+=1)}_validateAdServerTargeting(e){let t=this.core.get(b),r=2,o=t.getTargeting(e);for(let[l,c]of Object.entries(o)){let h=t.getAdServerTargeting(e,l);if(c.length>h.length||c.some(v=>!h.includes(v)))return 0;h.length>c.length&&(r=1)}return r}_onSlotRequestValidated(e){e?this.totalValidatedAdServerRequests.ok+=1:this.totalValidatedAdServerRequests.notOk+=1}_sendTracker(){let e=this.core.get(pe).getRestoreCount(),{slots:t,targeting:r,start:o}=this._getOrStartBatch(),l={cd110:t.READY.join(),cd111:t.PREV_READY.join(),cd112:t.SEEN.join(),cd113:t.NOT_READY.join(),cd114:t.UNKNOWN.join(),cd115:t.POSSIBLE_TIMEOUT.join(),cm106:this.trackersSent,cm107:o,cm109:this.totalTimeoutCount,cm110:this.slotReqAvgTimeSinceCall.getRounded(),cm111:this.slotReqAvgTimeSinceDone.getRounded(),cm112:this.totalSlotsRequestedOkCount,cm113:this.totalValidatedAdServerRequests.ok,cm114:this.totalValidatedAdServerRequests.notOk,cm115:e,cm116:this.totalAdRequestsCompletedCount,cm117:this.totalInternalAdRequestQueuedCount,cm118:this.totalSlotsRequestedCount,cm119:r.reducedCount,cm120:r.extendedCount};this.core.get(x).fireEvent(fo,l),this.batch=null,this.trackersSent+=1,this.trackersSent>=Eo&&(this.enabled=!1)}_getOrStartBatch(){return this.batch==null&&(this.batch={start:ke(),slots:Object.fromEntries(Object.values(wt).map(e=>[e,[]])),targeting:{extendedCount:0,reducedCount:0}},setTimeout(()=>this._sendTracker(),So)),this.batch}};i(ie,"ImplementationValidator"),d([R],ie.prototype,"_initialize",1),d([f(_,"adRequestQueued")],ie.prototype,"_onAdRequestQueued",1),d([f(_,"adRequestCompleted")],ie.prototype,"_onAdRequestCompleted",1),d([f(q,"onSlotRequested")],ie.prototype,"_onSlotRequested",1),d([f(q,"onSlotRequestValidated")],ie.prototype,"_onSlotRequestValidated",1),ie=d([g],ie);s();a();s();a();var Ae=class{_defineSlot(e,t={}){if(typeof e!="string"||t==null||typeof t!="object")return;let r={id:Q(t.id),network:Q(t.network),sizes:t.sizes!=null?et(t.sizes):void 0,position:Q(t.position)};this.core.get(A).createSlot("custom",0,e,r)}_adRendered(e,t){if(typeof e!="string"||t==null||typeof t!="object")return;let r=this.core.get(A).getSlot("custom",e);if(r==null)return;let o={type:"display",advertiserId:Q(t.advertiserId),campaignId:Q(t.campaignId),creativeId:Q(t.creativeId),lineItemId:Q(t.lineItemId),renderedSize:At(t.renderedSize)};this.core.get(w).setAdRendered(r,o)}_getTargeting(e){let t=this.core.get(b);if(typeof e!="string")return t.getTargeting();let r=this.core.get(A).getSlot("custom",e);return t.getTargeting(r)}};i(Ae,"CustomAdServer"),d([J("defineSlot")],Ae.prototype,"_defineSlot",1),d([J("getTargeting")],Ae.prototype,"_getTargeting",1),Ae=d([g],Ae);s();a();var De=class{constructor(){u(this,"initialized",!1);u(this,"size",0)}_initialize(){return E(this,null,function*(){if(yield Promise.resolve(),this.initialized)return;this.initialized=!0,this.core.dvtag.cmd instanceof Array||(this.core.dvtag.cmd=[]);let e=this.core.dvtag.cmd;this.core.dvtag.cmd={push:i((...t)=>{for(let r of t)try{r()}catch(o){}return this.size+=t.length,this.size},"push")},this.core.dvtag.cmd.push(...e)})}};i(De,"CommandBuffer"),d([R],De.prototype,"_initialize",1),De=d([g],De);var at=class{};i(at,"HouseHold"),at=d([g,O(_),O(De),O(x),O(Ae),O(pe),O(H)],at);s();a();if(window.dvtag==null||window.dvtag._core==null)try{new ut(Ft,window)}catch(n){}})();
