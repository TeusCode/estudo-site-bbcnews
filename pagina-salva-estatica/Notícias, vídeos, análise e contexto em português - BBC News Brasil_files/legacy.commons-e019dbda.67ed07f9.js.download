"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[1174],{761:function(e,t,n){var r=n(96540);t.A=function(e,t){(0,r.useEffect)((function(){var n=window.matchMedia(e);return t(n),n.addEventListener?n.addEventListener("change",t):n.addListener(t),function(){n.removeEventListener?n.removeEventListener("change",t):n.removeListener(t)}}),[e,t])}},9972:function(e,t,n){var r=n(5544),a=n(96540);t.A=function(){var e=(0,a.useState)(!1),t=(0,r.A)(e,2),n=t[0],i=t[1];return(0,a.useEffect)((function(){"undefined"!=typeof window&&window.operamini&&i(!0)}),[]),n}},17624:function(e,t,n){n.d(t,{D:function(){return l},s:function(){return f}});var r=n(64467),a=(n(26099),n(16034),n(96540)),i=n(88081),o=n(82439),c=n(20875),u=n(86991),s=n(75258),l=(0,a.createContext)({}),v={},f=function(e){var t=e.children,n=e.atiData,f=(0,a.useContext)(i.b),d=f.pageType,p=(0,a.useContext)(s.h),m=p.atiAnalyticsProducerId,A=p.atiAnalyticsProducerName,g=(0,o.A)("eventTracking").enabled,y=(0,a.useMemo)((function(){if(g&&n){var e=function(e){var t,n=(t={},(0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)(t,c.R,"article"),c.KM,"article-sfv"),c.X2,"list-datadriven-read"),c.KN,"article-media-asset"),c.YR,"article-sty"),c.MX,"article-photo-gallery"),c.vw,"article-csp"),c.Sp,"topic-page"),c.ZD,"live-page"),c.Ko,"index-home"),(0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)(t,c.M$,""),c.zA,"static-page"),c.G_,""),c.lU,"av-embeds"),c.WK,"downloads"),c.rs,"player-live"),c.XN,"player-episode"),c.pJ,"player-episode"))[e];return n||console.warn("ATI Event Tracking Error: Could not get the page type's campaign name"),n}(d),t=(0,u.uo)({requestContext:f,serviceContext:p,atiData:n}),a=t.pageIdentifier,i=t.platform,o=t.statsDestination;return{campaignID:e,pageIdentifier:a,platform:i,producerId:m,producerName:A,statsDestination:o}}return null}),[m,A,n,g,d,f,p]);if(!g||!n)return a.createElement(l.Provider,{value:v},t);var b=Object.values(y).every(Boolean);return a.createElement(l.Provider,{value:b?y:v},t)}},25457:function(e,t,n){n.d(t,{R:function(){return f},a:function(){return d}});var r=n(5544),a=n(96540),i=n(18987),o=n(4178),c=n(16389),u=n(62242),s=n(48577),l=function(){return i.A.get("ckns_policy")||"000"},v=function(e){return!(!e||3!==e.length||"1"!==e[2])},f=a.createContext({}),d=function(e){var t=e.children,n=(0,a.useState)(l()),d=(0,r.A)(n,2),p=d[0],m=d[1];(0,o.A)()&&!(0,c.A)()&&function(){var e="ckns_mvt";if(!i.A.get(e)){var t=(0,s.A)();(0,u.A)({name:e,value:t})}}();var A=(0,a.useMemo)((function(){return{cookiePolicy:p,updateCookiePolicy:function(){return m(l())},personalisationEnabled:v(p)}}),[p]);return a.createElement(f.Provider,{value:A},t)}},27028:function(e,t,n){var r=n(64467),a=n(5544),i=n(54756),o=n.n(i),c=(n(23792),n(69085),n(26099),n(3362),n(47764),n(62953),n(96540)),u=n(88081),s=n(20813),l=n(88253),v=n(69099),f=n(51813),d=n(37221),p=n(8073),m=n(64074),A=n(37884),g=n(75258),y=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}u((r=r.apply(e,t||[])).next())}))};t.A=function(e){var t=(0,c.useContext)(u.b).isLite,i=function(e){var t=(0,d.A)({eventTrackingData:e,eventType:v.Rl}),r=t.componentName,i=t.format,u=t.advertiserID,f=t.url,b=t.pageIdentifier,h=t.platform,w=t.producerId,E=t.producerName,O=t.statsDestination,k=t.campaignID,P=t.detailedPlacement,x=t.sendOptimizelyEvents,D=(0,c.useContext)(s.wP).optimizely,S=(0,l.A)(A.A.ruleKey),_=(0,c.useRef)(null),L=(0,c.useRef)(null),N=(0,c.useState)(!1),C=(0,a.A)(N,2),I=C[0],T=C[1],K=(0,c.useState)(!1),j=(0,a.A)(K,2),R=j[0],G=j[1],U=(0,m.A)(r).trackingIsEnabled,B=(0,c.useContext)(g.h),M=B.service,z=B.useReverb;return(0,c.useEffect)((function(){return I&&!L.current?L.current=setTimeout((function(){var e;if([[k,r,b,h,w,E,M,O].every(Boolean),U,!R].every(Boolean)){if(D&&x&&S){var t=null==D?void 0:D.user.attributes;D.track("".concat(r,"-views"),D.user.id,t)}(0,p.T)(Object.assign({campaignID:k,componentName:r,format:i,pageIdentifier:b,platform:h,producerId:w,producerName:E,service:M,statsDestination:O,type:v.Rl,advertiserID:u,url:f,detailedPlacement:P,useReverb:z},S&&"off"!==S&&{experimentVariant:S})),G(!0),null===(e=_.current)||void 0===e||e.disconnect(),_.current=null,L.current=null}}),1e3):(clearTimeout(L.current),L.current=null),function(){clearTimeout(L.current)}}),[k,r,i,I,b,h,w,E,M,O,U,R,u,f,x,D,S,P,z]),(0,c.useCallback)((function(e){return y(void 0,void 0,void 0,o().mark((function t(){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&U&&!R){t.next=2;break}return t.abrupt("return");case 2:if(_.current){t.next=5;break}return t.next=5,y(void 0,void 0,void 0,o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==window.IntersectionObserver){e.next=3;break}return e.next=3,n.e(5127).then(n.t.bind(n,95127,23));case 3:t=function(e){var t=e.some((function(e){return e.isIntersecting}));T(t)},r={threshold:[.5]},_.current=new IntersectionObserver(t,r);case 6:case"end":return e.stop()}}),e)})));case 5:null===(r=_.current)||void 0===r||r.observe(e);case 6:case"end":return t.stop()}}),t)})))}),[U,R])}(e),b=(0,f.A)({eventTrackingData:e,eventType:v.Rl});return t?(0,r.A)({},v.kd,b):{ref:i}}},53665:function(e,t,n){n.d(t,{Gg:function(){return f},$z:function(){return d}});var r=n(5544),a=n(96540),i=n(11197),o=n(37667),c=(n(69085),n(10851)),u=n.n(c),s=function(e){var t=e.data;return u()(!1,["toggles","ads","enabled"],t)},l=function(e,t){var n=t.type,r=t.data;return"UPDATE_TOGGLE_STATE"===n?Object.assign(Object.assign(Object.assign({},e),r.toggles),{ads:{enabled:s({data:r})}}):e},v=(0,o.U)().SIMORGH_APP_ENV||"local",f=(0,a.createContext)({}),d=function(e){var t=e.children,n=e.toggles,o=void 0===n?i.A[v]:n,c=(0,a.useReducer)(l,o),u=(0,r.A)(c,2),s=u[0],d=u[1],p=(0,a.useMemo)((function(){return{toggleState:s,toggleDispatch:d}}),[s,d]);return a.createElement(f.Provider,{value:p},t)};f.Consumer},64074:function(e,t,n){n(74423),n(21699),n(42762);var r=n(82439);t.A=function(e){var t=(0,r.A)("eventTracking"),n=t.enabled,a=t.value,i=("string"==typeof a?a.trim().split(","):[]).includes(e);return{trackingIsEnabled:!0===n&&!i}}},71871:function(e,t,n){n.d(t,{A:function(){return N}});var r=n(64467),a=n(10467),i=n(5544),o=n(54756),c=n.n(o),u=(n(52675),n(2008),n(83851),n(81278),n(79432),n(26099),n(23500),n(96540)),s=n(20813),l=n(88253),v=n(37221),f=n(51813),d=n(69099),p=n(88081),m=n(64074),A=n(37884),g=n(8073),y=n(75258),b=n(66749),h=n.n(b),w=n(65044),E=n.n(w),O=function(e){return 0===e},k=function(e){return 1===e||4===e},P=function(e){return k(e.button)||function(e){return O(e.button)&&e.shiftKey&&!(e.metaKey||e.altKey||e.ctrlKey)}(e)},x=function(e,t){return t&&!e.shiftKey&&!e.altKey||e.shiftKey&&t&&!e.altKey||e.shiftKey&&t&&e.altKey||e.shiftKey&&e.altKey&&!t||e.altKey&&t&&!e.shiftKey},D=function(e){return(h()(E()("Mac"),["navigator","platform"],window)?function(e){return O(e.button)&&x(e,e.metaKey)}(e):function(e){return O(e.button)&&x(e,e.ctrlKey)}(e))||P(e)},S=function(e){return k(e.button)||function(e){return O(e.button)&&!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||D(e)};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.useContext)(p.b).isAmp,n=function(){var e=(0,u.useState)(!1),t=(0,i.A)(e,2),n=t[0],r=t[1];return(0,u.useEffect)((function(){r(!0)}),[]),n}(),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,v.A)({eventTrackingData:e,eventType:d.sz}),n=t.pageIdentifier,r=t.producerId,o=t.platform,f=t.statsDestination,p=t.componentName,b=t.campaignID,h=t.format,w=t.advertiserID,E=t.url,O=t.detailedPlacement,k=t.producerName,P=t.preventNavigation,x=t.sendOptimizelyEvents,D=(0,m.A)(p).trackingIsEnabled,_=(0,u.useState)(!1),N=(0,i.A)(_,2),C=N[0],I=N[1],T=(0,u.useContext)(y.h),K=T.service,j=T.useReverb,R=(0,u.useContext)(s.wP).optimizely,G=(0,l.A)(A.A.ruleKey);return(0,u.useCallback)(function(){var e=(0,a.A)(c().mark((function e(t){var a,i,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(![D,!C,S(t)].every(Boolean)){e.next=15;break}if(I(!0),![b,p,n,o,r,k,K,f].every(Boolean)){e.next=15;break}return i=null==t||null===(a=t.currentTarget)||void 0===a?void 0:a.href,t.stopPropagation(),t.preventDefault(),R&&x&&G&&(u=null==R?void 0:R.user.attributes,R.track("".concat(p,"-clicks"),R.user.id,u)),e.prev=9,e.next=12,(0,g.T)(L({type:d.sz,campaignID:b,componentName:p,format:h,pageIdentifier:n,platform:o,producerId:r,producerName:k,service:K,advertiserID:w,statsDestination:f,url:E||i,detailedPlacement:O,useReverb:j},G&&"off"!==G&&{experimentVariant:G}));case 12:return e.prev=12,i&&!P&&(R&&R.close(),window.location.assign(i)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[9,,12,15]])})));return function(t){return e.apply(this,arguments)}}(),[D,C,b,p,n,o,P,r,k,K,f,E,w,h,x,R,G,O,j])}(e),b=(0,f.A)({eventTrackingData:e,eventType:d.sz,isStatic:!n});return L(L({},!n&&!t&&(0,r.A)({},d.Fk,b)),n&&{onClick:o})}},75258:function(e,t,n){n.d(t,{h:function(){return c},y:function(){return u}});var r=n(96540),a=n(72702),i=n(31),o=n(81292),c=(0,r.createContext)({}),u=function(e){var t=e.children,n=e.service,u=e.variant,s=e.pageLang,l=a.A[n];return l?r.createElement(l,{Context:c,dataKey:(0,o.A)({service:n,pageLang:s})||(0,i.IX)({service:n,variant:u})},t):null}},82439:function(e,t,n){n(52675),n(2008),n(83851),n(81278),n(79432),n(26099),n(23500);var r=n(64467),a=n(96540),i=n(53665);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.A=function(e){var t=(0,a.useContext)(i.Gg).toggleState[e],n=t||{},c=n.enabled,u=void 0===c?null:c,s=n.value;return t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{enabled:u,value:s}):{enabled:null}}},88081:function(e,t,n){n.d(t,{b:function(){return f},I:function(){return d}});n(69085);var r=n(96540),a=function(e){var t=e.isUK,n=void 0===t||t,r=e.env,a=void 0===r?"test":r,i="";switch(e.service){case"news":i=!1!==n?"NEWS_PS":"NEWS_GNL";break;case"cymrufyw":case"naidheachdan":i=!1!==n?"NEWS_LANGUAGES_PS":"NEWS_LANGUAGES_GNL";break;case"japanese":i="NEWS_LANGUAGES_GNL";break;case"scotland":i="PS_HOMEPAGE";break;case"archive":i="BBC_ARCHIVE_PS";break;case"newsround":i="NEWSROUND";break;case"sport":i=!1!==n?"SPORT_PS":"SPORT_GNL";break;case"ws":i="DEFAULT";break;default:i="WS_NEWS_LANGUAGES"}return"live"===a?i:"".concat(i,"_TEST")},i=n(37667),o=n(65606),c=function(e){var t="https://www.bbc.co.uk";return e?t=e:(null!=o?"local"===(0,i.U)().SIMORGH_APP_ENV:void 0)?t=(0,i.U)().SIMORGH_BASE_URL:"undefined"!=typeof window&&window.location&&window.location.origin&&(t=window.location.origin),{origin:t}},u=(n(74423),n(21699),function(e){return e.includes("local")?"local":e.includes("test")||e.includes("stage")?"test":"live"}),s=(n(28706),n(27495),n(25440),n(71390)),l=function(e){return"".concat(e,".amp")},v=function(e,t){var n=function(e,t){return"".concat(e).concat(t).replace(s.AMP_REGEX,"").replace(s.LITE_REGEX,"")}(e,t),r=n.replace(s.TLD_REGEX,".co.uk"),a=function(e){return e.replace(s.TLD_REGEX,".com")}(n);return{canonicalLink:n,ampLink:l(n),canonicalUkLink:r,ampUkLink:l(r),canonicalNonUkLink:a,ampNonUkLink:l(a)}},f=r.createContext({}),d=function(e){var t=e.bbcOrigin,n=void 0===t?null:t,i=e.derivedPageType,o=void 0===i?null:i,s=e.children,l=e.id,d=void 0===l?null:l,p=e.isAmp,m=void 0!==p&&p,A=e.isApp,g=void 0!==A&&A,y=e.isLite,b=void 0!==y&&y,h=e.isNextJs,w=void 0!==h&&h,E=e.mvtExperiments,O=void 0===E?null:E,k=e.pageType,P=e.pathname,x=e.service,D=e.showAdsBasedOnLocation,S=void 0!==D&&D,_=e.showCookieBannerBasedOnCountry,L=void 0===_||_,N=e.statusCode,C=void 0===N?null:N,I=e.timeOnServer,T=void 0===I?null:I,K=e.variant,j=void 0===K?null:K,R=e.isUK,G=void 0===R?null:R,U=c(n).origin,B=u(U);w&&"local"===B&&(U="http://localhost:7081");var M=null!=G&&G,z=function(){switch(!0){case g:return"app";case m:return"amp";case b:return"lite";default:return"canonical"}}(),W=a({isUK:"amp"===z||M,env:B,service:x}),X=(0,r.useMemo)((function(){return Object.assign(Object.assign({env:B,id:d,isUK:M,origin:U,pageType:k,derivedPageType:o,isAmp:m,isApp:g,isLite:b,isNextJs:w,platform:z,statsDestination:W,statusCode:C,variant:j,timeOnServer:T,showAdsBasedOnLocation:S,showCookieBannerBasedOnCountry:L,service:x,pathname:P},v(U,P)),{mvtExperiments:O})}),[o,B,M,d,m,g,b,w,O,U,k,P,z,x,S,L,W,C,T,j]);return r.createElement(f.Provider,{value:X},s)}},88253:function(e,t,n){n.d(t,{A:function(){return f}});n(50113),n(26099);var r=n(96540),a=n(20813),i=n(88081),o=n(10467),c=n(54756),u=n.n(c),s=n(4178),l=function(){var e=(0,o.A)(u().mark((function e(t,n,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,s.A)()||!t){e.next=5;break}return e.next=3,null==t?void 0:t.onReady();case 3:e.sent&&(t.setForcedVariation(n,r),t.activate(n));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),v=l,f=function(e){var t=(0,r.useContext)(a.wP).optimizely,n=(0,r.useContext)(i.b).mvtExperiments;if(!n||0===n.length||null===e)return null;var o=n.find((function(t){return t.experimentName===e}));if(!o)return null;var c=o.enabled&&o.variation;return c&&"false"!==c?(c&&v(t,e,c),c):null}},95673:function(e,t,n){n(96540);var r=n(17437);t.A=function(e){return function(t){var n=t.Context,a=t.dataKey,i=void 0===a?null:a,o=t.children;return(0,r.Y)(n.Provider,{value:i?e[i]:e},o)}}}}]);
//# sourceMappingURL=legacy.commons-e019dbda.67ed07f9.js.map